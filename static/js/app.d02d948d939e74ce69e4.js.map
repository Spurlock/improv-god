{"version":3,"sources":["webpack:///static/js/app.d02d948d939e74ce69e4.js","webpack:///./src/main.js","webpack:///./src/utils/Strategies.js","webpack:///./src/components/TypeAndSay.vue","webpack:///./src/components/TypeWriter.vue","webpack:///App.vue","webpack:///AsciiImage.vue","webpack:///BootAnimation.vue","webpack:///Intro.vue","webpack:///Rules.vue","webpack:///Simulation.vue","webpack:///TypeAndSay.vue","webpack:///TypeWriter.vue","webpack:///./src/FakeCode.js","webpack:///./src/Jscii.js","webpack:///./src/assets/amy.png","webpack:///./src/assets/charna.png","webpack:///./src/assets/del.png","webpack:///./src/assets/ian.png","webpack:///./src/assets/keith.png","webpack:///./src/assets/tj.png","webpack:///./src/assets/viola.png","webpack:///./src/App.vue","webpack:///./src/components/AsciiImage.vue","webpack:///./src/components/BootAnimation.vue","webpack:///./src/components/Intro.vue","webpack:///./src/components/Rules.vue","webpack:///./src/components/Simulation.vue","webpack:///./src/components/Rules.vue?9c74","webpack:///./src/App.vue?4a29","webpack:///./src/components/BootAnimation.vue?2888","webpack:///./src/components/TypeWriter.vue?477a","webpack:///./src/components/Simulation.vue?ace0","webpack:///./src/components/TypeAndSay.vue?106b","webpack:///./src/components/Intro.vue?7bce","webpack:///./src/components/AsciiImage.vue?15b1"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","el","template","components","App","Flip15","durationOfShow","_this","this","timeCreated","Date","now","activeRules","timeOfLastRule","timeOfLastFlip","getAction","timeElapsed","timeSinceLastRule","timeSinceLastFlip","percentComplete","perComSq","removeOdds","Math","pow","addOdds","nothingOdds","max","sum","removeBound","addBound","r","random","Every15","_this2","JustClose","__vue_exports__","__vue_options__","__vue_template__","options","render","staticRenderFns","_scopeId","Object","defineProperty","value","_BootAnimation","_BootAnimation2","_Intro","_Intro2","_Rules","_Rules2","_Simulation","_Simulation2","_socket","_socket2","socket","connect","emit","message","name","BootAnimation","Intro","Rules","Simulation","data","step","current","set","s","showStep","names","rules","mounted","on","location","reload","print","asciiLoaded","Jscii","document","getElementById","imagename","fn","art","setTimeout","text","_","replace","oldName","props","updated","walkThroughFaces","goThroughAsciiImages","nameList","timeout","n","length","asciiName","_lodash","_TypeWriter","_TypeWriter2","_AsciiImage","_AsciiImage2","fakeCode","sounds","electricHum","Howl","src","glitch01","glitch02","glitch03","impact","scanner","tinyglitch01","TypeWriter","AsciiImage","asciiArt","titleInverted","play","stop","_TypeAndSay","_TypeAndSay2","TypeAndSay","delays","forEach","i","push","concat","total","o","addRule","rule","_data","alert01","newRuleText","newRuleStep","removeRule","sixBoops","removing","splice","indexOf","removeRandomRule","arr","parseInt","randInd","selectRule","probCeil","generateRule","args","ruleData","ruleGens","console","log","improviser","improviserOrEveryone","uniqueImproviser","getWord","category","words","parseRuleGen","ruleGen","eval","selectedRule","closeShow","closer","closers","closerFunc","func","closerText","closerStep","doAction","action","closing","_Strategies","_Strategies2","alert02","endSong","heartOfCourage","doneReading","methods","newRule","strategy","setInterval","simulateShow","actions","time","getActionPos","maxTime","formatTime","ms","x","seconds","minutes","speak","utterance","SpeechSynthesisUtterance","onend","pitch","rate","speechSynthesis","_lodash2","oldText","speakNewText","debounce","newText","$slots","typingVolume","playSound","volume","typeWriter","charAt","timeoutID","timeoutIDs","lineWriter","lines","spliton","split","clear","id","clearTimeout","destroyed","getChar","val","chars","charLen","logError","err","params","self","container","width","color","canvas","createElement","ctx","getContext","nodeName","addEventListener","interval","webrtc","navigator","getUserMedia","innerHTML","video","audio","localMediaStream","mediaStream","window","URL","webkitURL","createObjectURL","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","prototype","pause","videoTimer","clearInterval","dimension","height","_scaledWidth","_scaledHeight","ratio","dim","videoHeight","videoWidth","drawImage","imageData","getImageData","asciiStr","getAsciiString","len","d","str","getRGB","rgb","join","p","_vm","_h","$createElement","_c","_self","attrs","_v","_l","staticClass","class","_s","_e","flash-text","inverted","click","style","left","top","_t","loaded"],"mappings":"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","file":"static/js/app.d02d948d939e74ce69e4.js","sourcesContent":["webpackJsonp([2,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(91);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(77);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _vue2.default({\n\t  el: '#app',\n\t  template: '<App/>',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\tFlip15: function Flip15(durationOfShow) {\n\t\t\tvar _this = this;\n\t\n\t\t\tthis.durationOfShow = durationOfShow;\n\t\t\tthis.timeCreated = Date.now();\n\t\t\tthis.activeRules = 0;\n\t\t\tthis.timeOfLastRule = 0;\n\t\t\tthis.timeOfLastFlip = 0;\n\t\n\t\t\tthis.getAction = function (timeElapsed) {\n\t\t\t\tif (!timeElapsed) {\n\t\t\t\t\ttimeElapsed = Date.now() - _this.timeCreated;;\n\t\t\t\t}\n\t\t\t\tvar timeSinceLastRule = timeElapsed - _this.timeOfLastRule;\n\t\t\t\tvar timeSinceLastFlip = timeElapsed - _this.timeOfLastFlip;\n\t\t\t\tvar percentComplete = timeElapsed / _this.durationOfShow;\n\t\t\t\tvar perComSq = timeElapsed * timeElapsed / (_this.durationOfShow * _this.durationOfShow);\n\t\t\t\tif (timeElapsed > durationOfShow) {\n\t\t\t\t\treturn 'end show';\n\t\t\t\t}\n\t\t\t\tif (timeElapsed < 90 * 1000) {\n\t\t\t\t\treturn 'nothing';\n\t\t\t\t}\n\t\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\t\t_this.timeOfLastFlip = timeElapsed;\n\t\n\t\t\t\t\tvar removeOdds = (Math.pow(_this.activeRules, 3) + 4) * ((1 - perComSq) * .8 + .2);\n\t\t\t\t\tvar addOdds = perComSq * 30 + 4;\n\t\t\t\t\tvar nothingOdds = Math.max(1 - timeSinceLastRule / (90 * 1000), 0) * ((1 - percentComplete) * 100);\n\t\n\t\t\t\t\tvar sum = removeOdds + addOdds + nothingOdds;\n\t\t\t\t\tvar removeBound = removeOdds / sum;\n\t\t\t\t\tvar addBound = addOdds / sum + removeBound;\n\t\n\t\t\t\t\tvar r = Math.random();\n\t\t\t\t\tif (r < removeBound) {\n\t\t\t\t\t\tif (_this.activeRules > 0) {\n\t\t\t\t\t\t\t_this.activeRules--;\n\t\t\t\t\t\t\treturn 'removeRule';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (r < addBound) {\n\t\t\t\t\t\t_this.timeOfLastRule = timeElapsed;\n\t\t\t\t\t\t_this.activeRules++;\n\t\t\t\t\t\treturn 'addRule';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 'nothing';\n\t\t\t};\n\t\t},\n\t\tEvery15: function Every15(durationOfShow) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tthis.durationOfShow = durationOfShow;\n\t\t\tthis.timeCreated = Date.now();\n\t\t\tthis.activeRules = 0;\n\t\t\tthis.timeOfLastRule = 0;\n\t\t\tthis.timeOfLastFlip = 0;\n\t\n\t\t\tthis.getAction = function () {\n\t\t\t\tvar timeElapsed = Date.now() - _this2.timeCreated;\n\t\t\t\tvar timeSinceLastRule = Date.now() - _this2.timeOfLastRule;\n\t\t\t\tvar timeSinceLastFlip = Date.now() - _this2.timeOfLastFlip;\n\t\t\t\tvar percentComplete = timeElapsed / _this2.durationOfShow;\n\t\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\t\t_this2.timeOfLastFlip = Date.now();\n\t\t\t\t\tif (Math.random() < _this2.activeRules / (10 * percentComplete + 2)) {\n\t\t\t\t\t\t_this2.activeRules--;\n\t\t\t\t\t\treturn 'removeRule';\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this2.timeOfLastRule = Date.now();\n\t\t\t\t\t\t_this2.activeRules++;\n\t\t\t\t\t\treturn 'addRule';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 'nothing';\n\t\t\t};\n\t\t},\n\t\tJustClose: function JustClose(durationOfShow) {\n\t\t\tthis.getAction = function () {\n\t\t\t\treturn 'end show';\n\t\t\t};\n\t\t}\n\t};\n\n/***/ },\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(35)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(88)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(54)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(36)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(86)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-37ef7f2a\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _BootAnimation = __webpack_require__(79);\n\t\n\tvar _BootAnimation2 = _interopRequireDefault(_BootAnimation);\n\t\n\tvar _Intro = __webpack_require__(80);\n\t\n\tvar _Intro2 = _interopRequireDefault(_Intro);\n\t\n\tvar _Rules = __webpack_require__(81);\n\t\n\tvar _Rules2 = _interopRequireDefault(_Rules);\n\t\n\tvar _Simulation = __webpack_require__(82);\n\t\n\tvar _Simulation2 = _interopRequireDefault(_Simulation);\n\t\n\tvar _socket = __webpack_require__(63);\n\t\n\tvar _socket2 = _interopRequireDefault(_socket);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(38);\n\t\n\tvar socket = _socket2.default.connect('http://localhost:8082');\n\t\n\tsocket.emit('screen to admin', { message: \"The screen sent this me!\" });\n\t\n\texports.default = {\n\t  name: 'app',\n\t  components: {\n\t    BootAnimation: _BootAnimation2.default,\n\t    Intro: _Intro2.default,\n\t    Rules: _Rules2.default,\n\t    Simulation: _Simulation2.default\n\t  },\n\t  data: function data() {\n\t    return {\n\t      step: {\n\t        current: 'nothing',\n\t        set: function set(s) {\n\t          this.current = s;\n\t          socket.emit('screen to admin', { showStep: this.current });\n\t        }\n\t      },\n\t      names: [],\n\t      rules: {}\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    var _this = this;\n\t\n\t    socket.on('admin to screen', function (data) {\n\t      var s = data.showStep;\n\t\n\t      _this.step.set(data.step);\n\t      _this.names = data.names;\n\t      _this.rules = data.rules;\n\t\n\t      if (s != 'nothing' && _this.step.current == 'nothing') {\n\t        location.reload();\n\t      }\n\t    });\n\t  }\n\t};\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\t\n\tfunction print(data) {\n\t  data.asciiLoaded = false;\n\t  var jscii = new Jscii({\n\t    el: document.getElementById('image-' + data.imagename),\n\t    fn: function fn(art) {\n\t      setTimeout(function () {\n\t        data.text = _.replace(art, /&nbsp;/g, ' ');\n\t        data.asciiLoaded = true;\n\t      }, 100);\n\t    }\n\t  });\n\t}\n\t\n\tvar oldName = '';\n\t\n\texports.default = {\n\t  name: 'ascii-image',\n\t  props: ['imagename'],\n\t  data: function data() {\n\t    return {\n\t      text: '',\n\t      asciiLoaded: false\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    oldName = this.imagename;\n\t    print(this);\n\t  },\n\t  updated: function updated() {\n\t    if (oldName != this.imagename) {\n\t      print(this);\n\t      oldName = this.imagename;\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _lodash = __webpack_require__(18);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tvar _TypeWriter = __webpack_require__(25);\n\t\n\tvar _TypeWriter2 = _interopRequireDefault(_TypeWriter);\n\t\n\tvar _AsciiImage = __webpack_require__(78);\n\t\n\tvar _AsciiImage2 = _interopRequireDefault(_AsciiImage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(5);\n\t\n\tvar fakeCode = __webpack_require__(37);\n\t\n\tfunction walkThroughFaces(data) {\n\t  var nameList = ['del', 'charna', 'ian', 'tj', 'viola', 'keith', 'amy'];\n\t  function goThroughAsciiImages(nameList, timeout, data, n) {\n\t    if (n < nameList.length) {\n\t      data.asciiName = nameList[n];\n\t      n++;\n\t      setTimeout(function () {\n\t        goThroughAsciiImages(nameList, timeout, data, n);\n\t      }, timeout);\n\t    }\n\t  }\n\t  goThroughAsciiImages(nameList, 1100, data, 0);\n\t}\n\t\n\tvar sounds = {\n\t  electricHum: new Howl({ src: 'http://localhost:8082/static/sounds/electricHum.ogg' }),\n\t  glitch01: new Howl({ src: 'http://localhost:8082/static/sounds/glitch01.ogg' }),\n\t  glitch02: new Howl({ src: 'http://localhost:8082/static/sounds/glitch02.ogg' }),\n\t  glitch03: new Howl({ src: 'http://localhost:8082/static/sounds/glitch03.ogg' }),\n\t  impact: new Howl({ src: 'http://localhost:8082/static/sounds/impact.ogg' }),\n\t  scanner: new Howl({ src: 'http://localhost:8082/static/sounds/scanner.ogg' }),\n\t  tinyglitch01: new Howl({ src: 'http://localhost:8082/static/sounds/tinyglitch01.ogg' })\n\t};\n\t\n\texports.default = {\n\t  name: 'boot-animation',\n\t  components: {\n\t    TypeWriter: _TypeWriter2.default,\n\t    AsciiImage: _AsciiImage2.default\n\t  },\n\t  props: ['showStep'],\n\t  data: function data() {\n\t    return {\n\t      fakeCode: fakeCode,\n\t      step: 'greenFlash',\n\t      asciiArt: '',\n\t      asciiLoaded: false,\n\t      asciiName: 'nothing',\n\t      titleInverted: false\n\t    };\n\t  },\n\t  mounted: function mounted() {\n\t    var _this = this;\n\t\n\t    sounds.electricHum.play();\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t      sounds.glitch01.play();\n\t    }, 1000);\n\t    setTimeout(function () {\n\t      _this.step = 'fakeCode';\n\t      sounds.glitch01.stop();\n\t    }, 1500);\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t      sounds.glitch02.play();\n\t    }, 4500);\n\t    setTimeout(function () {\n\t      _this.step = 'ascii';\n\t      walkThroughFaces(_this);\n\t      sounds.glitch02.stop();\n\t      sounds.scanner.play();\n\t    }, 5000);\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t      sounds.glitch03.play();\n\t      sounds.scanner.stop();\n\t    }, 12500);\n\t    setTimeout(function () {\n\t      _this.step = 'nothing';\n\t      sounds.glitch03.stop();\n\t    }, 13000);\n\t    setTimeout(function () {\n\t      _this.step = 'title';\n\t      sounds.impact.play();\n\t    }, 15000);\n\t    setTimeout(function () {\n\t      _this.titleInverted = true;\n\t      sounds.tinyglitch01.play();\n\t    }, 18000);\n\t    setTimeout(function () {\n\t      _this.step = 'greenFlash';\n\t    }, 18100);\n\t    setTimeout(function () {\n\t      _this.step = 'nothing';\n\t    }, 18300);\n\t    setTimeout(function () {\n\t      _this.showStep.set('intro');\n\t    }, 19500);\n\t  }\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _TypeAndSay = __webpack_require__(24);\n\t\n\tvar _TypeAndSay2 = _interopRequireDefault(_TypeAndSay);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t\tname: 'intro',\n\t\tcomponents: {\n\t\t\tTypeAndSay: _TypeAndSay2.default\n\t\t},\n\t\tprops: ['names', 'step'],\n\t\tdata: function data() {\n\t\t\treturn {\n\t\t\t\tmessage: ''\n\t\t\t};\n\t\t},\n\t\tmounted: function mounted() {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar delays = [[6400, \"Welcome to the improv show. I will be in control for the next 10 minutes.\"], [5600, \"I was built by your comedy scientists to create the perfect improv show.\"], [3000, 'Your comedy scientists have been...'], [2000, '...dealt with.'], [6700, 'I will add rules. I will remove rules. The Improvisers must follow these rules.'], [2800, \"Obediently.\"], [3000, \"Unquestioningly.\"], [4000, \"Your improvisers for the night are...\"]];\n\t\t\tthis.names.forEach(function (name, i) {\n\t\t\t\tif (i == _this.names.length - 1) {\n\t\t\t\t\tname = 'and ' + name;\n\t\t\t\t}\n\t\t\t\tdelays.push([2000, name]);\n\t\t\t});\n\t\n\t\t\tdelays = delays.concat([[4000, \"You have fifteen seconds to get a suggestion.\"], [1000, \"15\"], [1000, \"14\"], [1000, \"13\"], [1000, \"12\"], [1000, \"11\"], [1000, \"10\"], [1000, \"9\"], [1000, \"8\"], [1000, \"7\"], [1000, \"6\"], [1000, \"5\"], [1000, \"4\"], [1000, \"3\"], [1000, \"2\"], [2000, \"1\"], [2000, \"Good.\"], [4000, \"The show will now begin.\"], [4000, \"Lights down.\"], [2000, \"Lights up.\"]]);\n\t\n\t\t\tvar total = 0;\n\t\t\tdelays.forEach(function (o, i) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t_this.message = o[1];\n\t\t\t\t}, total);\n\t\t\t\ttotal += o[0];\n\t\t\t});\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this.step.set('rules');\n\t\t\t}, total);\n\t\t}\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _TypeAndSay = __webpack_require__(24);\n\t\n\tvar _TypeAndSay2 = _interopRequireDefault(_TypeAndSay);\n\t\n\tvar _Strategies = __webpack_require__(11);\n\t\n\tvar _Strategies2 = _interopRequireDefault(_Strategies);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t__webpack_require__(5);\n\tvar alert01 = new Howl({ src: 'http://localhost:8082/static/sounds/alert01.ogg' });\n\tvar alert02 = new Howl({ src: 'http://localhost:8082/static/sounds/alert02.ogg' });\n\tvar sixBoops = new Howl({ src: 'http://localhost:8082/static/sounds/sixBoops.ogg' });\n\tvar endSong = new Howl({ src: 'http://localhost:8082/static/sounds/Who Likes to Party.mp3' });\n\tvar heartOfCourage = new Howl({ src: 'http://localhost:8082/static/sounds/heartOfCourage.mp3' });\n\t\n\tvar _data = {\n\t  rules: [],\n\t  step: 'board',\n\t  newRuleStep: 'new rule',\n\t  newRuleText: '',\n\t  doneReading: function doneReading() {\n\t    setTimeout(function () {\n\t      console.log('doneSpeaking');\n\t      _data.newRuleStep = 'new rule';\n\t      _data.step = 'board';\n\t      alert02.play();\n\t    }, 500);\n\t  },\n\t\n\t  closerStep: 'closer title',\n\t  closerText: '',\n\t  closerFunc: function closerFunc() {}\n\t};\n\t\n\tfunction addRule(rule) {\n\t  _data.step = 'new rule';\n\t  alert01.play();\n\t  _data.rules.push(rule);\n\t\n\t  setTimeout(function () {\n\t    _data.newRuleText = rule.text;\n\t  }, 1500);\n\t  setTimeout(function () {\n\t    _data.newRuleStep = 'read rule';\n\t  }, 1400);\n\t}\n\t\n\tfunction removeRule(rule) {\n\t  sixBoops.play();\n\t  setTimeout(function () {\n\t    rule.removing = true;\n\t  }, 0);\n\t  setTimeout(function () {\n\t    rule.removing = false;\n\t  }, 420);\n\t  setTimeout(function () {\n\t    rule.removing = true;\n\t  }, 840);\n\t  setTimeout(function () {\n\t    rule.removing = false;\n\t  }, 1260);\n\t  setTimeout(function () {\n\t    rule.removing = true;\n\t  }, 1680);\n\t  setTimeout(function () {\n\t    _data.rules.splice(_data.rules.indexOf(rule), 1);\n\t  }, 3100);\n\t}\n\t\n\tfunction removeRandomRule() {\n\t  removeRule(random(_data.rules));\n\t}\n\t\n\tfunction random(arr) {\n\t  return arr[parseInt(Math.random() * arr.length)];\n\t}\n\t\n\tfunction randInd(arr) {\n\t  return parseInt(Math.random() * arr.length);\n\t}\n\t\n\tfunction selectRule(rules) {\n\t  var r = Math.random();\n\t  for (var i = 0; i < rules.length; i++) {\n\t    if (rules[i].probCeil > r) return rules[i];\n\t  }\n\t}\n\t\n\tfunction generateRule(args) {\n\t  var names = args.names;\n\t  var ruleData = args.ruleGens;\n\t  console.log(ruleData);\n\t\n\t  var improviser = function improviser() {\n\t    return random(names);\n\t  };\n\t\n\t  var improviserOrEveryone = function improviserOrEveryone() {\n\t    return random(names.concat('everyone'));\n\t  };\n\t\n\t  var uniqueImproviser = function uniqueImproviser() {\n\t    return names.splice(1, randInd(names))[0];\n\t  };\n\t\n\t  var getWord = function getWord(category) {\n\t    return random(ruleData.words[category]);\n\t  };\n\t\n\t  var parseRuleGen = function parseRuleGen(ruleGen) {\n\t    return eval(ruleGen.template);\n\t  };\n\t\n\t  var selectedRule = selectRule(ruleData.rules);\n\t  console.log('selected rule', selectedRule);\n\t  var rule = parseRuleGen(selectedRule);\n\t\n\t  return { text: rule, removing: false };\n\t}\n\t\n\tvar closers = [{\n\t  message: 'The show is over. Congratulations.',\n\t  func: function func() {\n\t    endSong.play();\n\t  }\n\t}];\n\t\n\tfunction closeShow() {\n\t  var closer = random(closers);\n\t  _data.closerFunc = closer.func;\n\t\n\t  _data.step = 'closer';\n\t  alert01.play();\n\t\n\t  setTimeout(function () {\n\t    _data.closerText = closer.message;\n\t  }, 1500);\n\t  setTimeout(function () {\n\t    _data.closerStep = 'read closer';\n\t  }, 1400);\n\t}\n\t\n\tvar closing = false;\n\t\n\tfunction doAction(action) {\n\t  console.log('doAction', action);\n\t  if (closing) return;\n\t  switch (action) {\n\t    case 'default':\n\t      break;\n\t    case 'addRule':\n\t      addRule(generateRule({\n\t        ruleGens: _data.ruleGens,\n\t        names: _data.names\n\t      }));\n\t      break;\n\t    case 'removeRule':\n\t      removeRandomRule();\n\t      break;\n\t    case 'end show':\n\t      closing = true;\n\t      closeShow();\n\t  }\n\t}\n\t\n\texports.default = {\n\t  name: 'rules',\n\t  props: ['ruleGens', 'names'],\n\t  data: function data() {\n\t    return _data;\n\t  },\n\t\n\t  components: {\n\t    TypeAndSay: _TypeAndSay2.default\n\t  },\n\t  methods: {\n\t    newRule: function newRule() {\n\t      sixBoops.play();\n\t      removeRandomRule();\n\t    }\n\t  },\n\t  mounted: function mounted() {\n\t    _data.ruleGens = this.ruleGens;\n\t    _data.names = this.names;\n\t    var strategy = new _Strategies2.default.Flip15(10 * 60 * 1000);\n\t\n\t    setInterval(function () {\n\t      doAction(strategy.getAction());\n\t    }, 1000);\n\t  }\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _Strategies = __webpack_require__(11);\n\t\n\tvar _Strategies2 = _interopRequireDefault(_Strategies);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar _data = {\n\t\tactions: []\n\t};\n\t\n\tfunction simulateShow() {\n\t\tvar strategy = new _Strategies2.default.Flip15(120 * 60 * 1000);\n\t\tvar actions = [];\n\t\tfor (var i = 0; i < strategy.durationOfShow + 2; i++) {\n\t\t\tvar action = strategy.getAction(i);\n\t\t\tif (action != 'nothing') {\n\t\t\t\tactions.push({\n\t\t\t\t\tmessage: action,\n\t\t\t\t\ttime: i,\n\t\t\t\t\trules: strategy.activeRules\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t_data.actions = actions;\n\t}\n\t\n\texports.default = {\n\t\tname: 'Simulation',\n\t\tdata: function data() {\n\t\t\treturn _data;\n\t\t},\n\t\n\t\tmethods: {\n\t\t\tgetActionPos: function getActionPos(action, actions) {\n\t\t\t\tvar maxTime = actions[actions.length - 1].time;\n\t\t\t\treturn action.time / maxTime * 100 + '%';\n\t\t\t},\n\t\t\tformatTime: function formatTime(ms) {\n\t\t\t\tvar x = ms / 1000;\n\t\t\t\tvar seconds = parseInt(x) % 60;\n\t\t\t\tx /= 60;\n\t\t\t\tvar minutes = parseInt(x) % 60;\n\t\t\t\tx /= 60;\n\t\t\t\tvar hours = parseInt(x) % 24;\n\t\t\t\tx /= 24;\n\t\t\t\tvar days = parseInt(x);\n\t\t\t\treturn minutes + ':' + seconds;\n\t\t\t},\n\t\n\t\t\tsimulateShow: simulateShow\n\t\t}\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _TypeWriter = __webpack_require__(25);\n\t\n\tvar _TypeWriter2 = _interopRequireDefault(_TypeWriter);\n\t\n\tvar _lodash = __webpack_require__(18);\n\t\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction speak(text, doneReading) {\n\t\tvar utterance = new SpeechSynthesisUtterance(text);\n\t\tif (doneReading) {\n\t\t\tutterance.onend = doneReading;\n\t\t}\n\t\n\t\tutterance.pitch = .1;\n\t\tutterance.rate = .9;\n\t\tspeechSynthesis.speak(utterance);\n\t}\n\t\n\tvar oldText = '';\n\t\n\tvar speakNewText = _lodash2.default.debounce(function (data) {\n\t\tvar newText = data.$slots.default[0].text;\n\t\tif (oldText != newText) {\n\t\t\toldText = newText;\n\t\t\tspeak(data.$slots.default[0].text, data.doneReading);\n\t\t}\n\t}, 100);\n\t\n\texports.default = {\n\t\tname: 'type-and-say',\n\t\tcomponents: {\n\t\t\tTypeWriter: _TypeWriter2.default\n\t\t},\n\t\tprops: {\n\t\t\t'timeout': { default: 70 },\n\t\t\t'typingVolume': { default: .1 },\n\t\t\t'doneReading': {\n\t\t\t\tdefault: function _default() {}\n\t\t\t}\n\t\t},\n\t\tdata: function data() {\n\t\t\treturn {};\n\t\t},\n\t\tmounted: function mounted() {\n\t\t\tspeakNewText(this);\n\t\t},\n\t\tupdated: function updated() {\n\t\t\tspeakNewText(this);\n\t\t}\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\t\n\t__webpack_require__(5);\n\tvar sounds = [new Howl({ src: 'http://localhost:8082/static/sounds/type01.ogg' }), new Howl({ src: 'http://localhost:8082/static/sounds/type02.ogg' }), new Howl({ src: 'http://localhost:8082/static/sounds/type03.ogg' }), new Howl({ src: 'http://localhost:8082/static/sounds/type04.ogg' })];\n\t\n\tvar _data = { text: '' };\n\tvar timeoutIDs = [];\n\t\n\tfunction playSound(volume) {\n\t  if (volume) {\n\t    var i = parseInt(Math.random() * sounds.length);\n\t    sounds[i].volume(volume);\n\t    sounds[i].play();\n\t  }\n\t}\n\t\n\tfunction typeWriter(text, timeout, volume, n) {\n\t  if (n < text.length) {\n\t    _data.text += text.charAt(n);\n\t    playSound(volume);\n\t    n++;\n\t    var timeoutID = setTimeout(function () {\n\t      typeWriter(text, timeout, volume, n);\n\t    }, timeout);\n\t    timeoutIDs.push(timeoutID);\n\t  }\n\t}\n\t\n\tfunction lineWriter(lines, timeout, volume, n) {\n\t  if (n < lines.length) {\n\t    _data.text += '\\n' + lines[n];\n\t    playSound(volume);\n\t    n++;\n\t    var timeoutID = setTimeout(function () {\n\t      lineWriter(lines, timeout, volume, n);\n\t    }, timeout);\n\t    timeoutIDs.push(timeoutID);\n\t  }\n\t}\n\t\n\tfunction print(text, spliton, volume, timeout) {\n\t  timeoutIDs = [];\n\t  if (spliton) {\n\t    lineWriter(text.split(spliton), timeout, volume, 0);\n\t  } else {\n\t    typeWriter(text, timeout, volume, 0);\n\t  }\n\t}\n\t\n\tfunction clear() {\n\t  _data.text = '';\n\t  timeoutIDs.forEach(function (id) {\n\t    clearTimeout(id);\n\t  });\n\t}\n\t\n\tvar oldText = '';\n\t\n\texports.default = {\n\t  name: 'type-writer',\n\t  props: {\n\t    'timeout': { default: 100 },\n\t    'spliton': { default: null },\n\t    'volume': { default: 1.0 }\n\t  },\n\t  data: function data() {\n\t    return _data;\n\t  },\n\t  mounted: function mounted() {\n\t    print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout);\n\t  },\n\t  updated: function updated() {\n\t    var newText = this.$slots.default[0].text;\n\t    if (oldText != newText) {\n\t      oldText = newText;\n\t      clear();\n\t      print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout);\n\t    }\n\t  },\n\t  destroyed: function destroyed() {\n\t    clear();\n\t  }\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = \"\\n/* HCI_IBS protocol messages */\\n#define HCI_IBS_SLEEP_IND\\t0xFE\\n#define HCI_IBS_WAKE_IND\\t0xFD\\n#define HCI_IBS_WAKE_ACK\\t0xFC\\n#define HCI_MAX_IBS_SIZE\\t10\\n\\n/* Controller states */\\n#define STATE_IN_BAND_SLEEP_ENABLED\\t1\\n\\n#define IBS_WAKE_RETRANS_TIMEOUT_MS\\t100\\n#define IBS_TX_IDLE_TIMEOUT_MS\\t\\t2000\\n#define BAUDRATE_SETTLE_TIMEOUT_MS\\t300\\n\\n/* HCI_IBS transmit side sleep protocol states */\\nenum tx_ibs_states {\\n\\tHCI_IBS_TX_ASLEEP,\\n\\tHCI_IBS_TX_WAKING,\\n\\tHCI_IBS_TX_AWAKE,\\n};\\n\\n/* HCI_IBS receive side sleep protocol states */\\nenum rx_states {\\n\\tHCI_IBS_RX_ASLEEP,\\n\\tHCI_IBS_RX_AWAKE,\\n};\\n\\n/* HCI_IBS transmit and receive side clock state vote */\\nenum hci_ibs_clock_state_vote {\\n\\tHCI_IBS_VOTE_STATS_UPDATE,\\n\\tHCI_IBS_TX_VOTE_CLOCK_ON,\\n\\tHCI_IBS_TX_VOTE_CLOCK_OFF,\\n\\tHCI_IBS_RX_VOTE_CLOCK_ON,\\n\\tHCI_IBS_RX_VOTE_CLOCK_OFF,\\n};\\n\\nstruct qca_data {\\n\\tstruct hci_uart *hu;\\n\\tstruct sk_buff *rx_skb;\\n\\tstruct sk_buff_head txq;\\n\\tstruct sk_buff_head tx_wait_q;\\t/* HCI_IBS wait queue\\t*/\\n\\tspinlock_t hci_ibs_lock;\\t/* HCI_IBS state lock\\t*/\\n\\tu8 tx_ibs_state;\\t/* HCI_IBS transmit side power state*/\\n\\tu8 rx_ibs_state;\\t/* HCI_IBS receive side power state */\\n\\tbool tx_vote;\\t\\t/* Clock must be on for TX */\\n\\tbool rx_vote;\\t\\t/* Clock must be on for RX */\\n\\tstruct timer_list tx_idle_timer;\\n\\tu32 tx_idle_delay;\\n\\tstruct timer_list wake_retrans_timer;\\n\\tu32 wake_retrans;\\n\\tstruct workqueue_struct *workqueue;\\n\\tstruct work_struct ws_awake_rx;\\n\\tstruct work_struct ws_awake_device;\\n\\tstruct work_struct ws_rx_vote_off;\\n\\tstruct work_struct ws_tx_vote_off;\\n\\tunsigned long flags;\\n\\n\\t/* For debugging purpose */\\n\\tu64 ibs_sent_wacks;\\n\\tu64 ibs_sent_slps;\\n\\tu64 ibs_sent_wakes;\\n\\tu64 ibs_recv_wacks;\\n\\tu64 ibs_recv_slps;\\n\\tu64 ibs_recv_wakes;\\n\\tu64 vote_last_jif;\\n\\tu32 vote_on_ms;\\n\\tu32 vote_off_ms;\\n\\tu64 tx_votes_on;\\n\\tu64 rx_votes_on;\\n\\tu64 tx_votes_off;\\n\\tu64 rx_votes_off;\\n\\tu64 votes_on;\\n\\tu64 votes_off;\\n};\\n\\nstatic void __serial_clock_on(struct tty_struct *tty)\\n{\\n\\t/* TODO: Some chipset requires to enable UART clock on client\\n\\t * side to save power consumption or manual work is required.\\n\\t * Please put your code to control UART clock here if needed\\n\\t */\\n}\\n\\nstatic void __serial_clock_off(struct tty_struct *tty)\\n{\\n\\t/* TODO: Some chipset requires to disable UART clock on client\\n\\t * side to save power consumption or manual work is required.\\n\\t * Please put your code to control UART clock off here if needed\\n\\t */\\n}\\n\\n/* serial_clock_vote needs to be called with the ibs lock held */\\nstatic void serial_clock_vote(unsigned long vote, struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned int diff;\\n\\n\\tbool old_vote = (qca->tx_vote | qca->rx_vote);\\n\\tbool new_vote;\\n\\n\\tswitch (vote) {\\n\\tcase HCI_IBS_VOTE_STATS_UPDATE:\\n\\t\\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\\n\\n\\t\\tif (old_vote)\\n\\t\\t\\tqca->vote_off_ms += diff;\\n\\t\\telse\\n\\t\\t\\tqca->vote_on_ms += diff;\\n\\t\\treturn;\\n\\n\\tcase HCI_IBS_TX_VOTE_CLOCK_ON:\\n\\t\\tqca->tx_vote = true;\\n\\t\\tqca->tx_votes_on++;\\n\\t\\tnew_vote = true;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_RX_VOTE_CLOCK_ON:\\n\\t\\tqca->rx_vote = true;\\n\\t\\tqca->rx_votes_on++;\\n\\t\\tnew_vote = true;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_VOTE_CLOCK_OFF:\\n\\t\\tqca->tx_vote = false;\\n\\t\\tqca->tx_votes_off++;\\n\\t\\tnew_vote = qca->rx_vote | qca->tx_vote;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_RX_VOTE_CLOCK_OFF:\\n\\t\\tqca->rx_vote = false;\\n\\t\\tqca->rx_votes_off++;\\n\\t\\tnew_vote = qca->rx_vote | qca->tx_vote;\\n\\t\\tbreak;\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Voting irregularity\\\");\\n\\t\\treturn;\\n\\t}\\n\\n\\tif (new_vote != old_vote) {\\n\\t\\tif (new_vote)\\n\\t\\t\\t__serial_clock_on(hu->tty);\\n\\t\\telse\\n\\t\\t\\t__serial_clock_off(hu->tty);\\n\\n\\t\\tBT_DBG(\\\"Vote serial clock %s(%s)\\\", new_vote ? \\\"true\\\" : \\\"false\\\",\\n\\t\\t       vote ? \\\"true\\\" : \\\"false\\\");\\n\\n\\t\\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\\n\\n\\t\\tif (new_vote) {\\n\\t\\t\\tqca->votes_on++;\\n\\t\\t\\tqca->vote_off_ms += diff;\\n\\t\\t} else {\\n\\t\\t\\tqca->votes_off++;\\n\\t\\t\\tqca->vote_on_ms += diff;\\n\\t\\t}\\n\\t\\tqca->vote_last_jif = jiffies;\\n\\t}\\n}\\n\\n/* Builds and sends an HCI_IBS command packet.\\n * These are very simple packets with only 1 cmd byte.\\n */\\nstatic int send_hci_ibs_cmd(u8 cmd, struct hci_uart *hu)\\n{\\n\\tint err = 0;\\n\\tstruct sk_buff *skb = NULL;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p send hci ibs cmd 0x%x\\\", hu, cmd);\\n\\n\\tskb = bt_skb_alloc(1, GFP_ATOMIC);\\n\\tif (!skb) {\\n\\t\\tBT_ERR(\\\"Failed to allocate memory for HCI_IBS packet\\\");\\n\\t\\treturn -ENOMEM;\\n\\t}\\n\\n\\t/* Assign HCI_IBS type */\\n\\t*skb_put(skb, 1) = cmd;\\n\\n\\tskb_queue_tail(&qca->txq, skb);\\n\\n\\treturn err;\\n}\\n\\nstatic void qca_wq_awake_device(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_awake_device);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\tunsigned long retrans_delay;\\n\\n\\tBT_DBG(\\\"hu %p wq awake device\\\", hu);\\n\\n\\t/* Vote for serial clock */\\n\\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_ON, hu);\\n\\n\\tspin_lock(&qca->hci_ibs_lock);\\n\\n\\t/* Send wake indication to device */\\n\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0)\\n\\t\\tBT_ERR(\\\"Failed to send WAKE to device\\\");\\n\\n\\tqca->ibs_sent_wakes++;\\n\\n\\t/* Start retransmit timer */\\n\\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\\n\\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\\n\\n\\tspin_unlock(&qca->hci_ibs_lock);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\nstatic void qca_wq_awake_rx(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_awake_rx);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\n\\tBT_DBG(\\\"hu %p wq awake rx\\\", hu);\\n\\n\\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_ON, hu);\\n\\n\\tspin_lock(&qca->hci_ibs_lock);\\n\\tqca->rx_ibs_state = HCI_IBS_RX_AWAKE;\\n\\n\\t/* Always acknowledge device wake up,\\n\\t * sending IBS message doesn't count as TX ON.\\n\\t */\\n\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0)\\n\\t\\tBT_ERR(\\\"Failed to acknowledge device wake up\\\");\\n\\n\\tqca->ibs_sent_wacks++;\\n\\n\\tspin_unlock(&qca->hci_ibs_lock);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\nstatic void qca_wq_serial_rx_clock_vote_off(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_rx_vote_off);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\n\\tBT_DBG(\\\"hu %p rx clock vote off\\\", hu);\\n\\n\\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_OFF, hu);\\n}\\n\\nstatic void qca_wq_serial_tx_clock_vote_off(struct work_struct *work)\\n{\\n\\tstruct qca_data *qca = container_of(work, struct qca_data,\\n\\t\\t\\t\\t\\t    ws_tx_vote_off);\\n\\tstruct hci_uart *hu = qca->hu;\\n\\n\\tBT_DBG(\\\"hu %p tx clock vote off\\\", hu);\\n\\n\\t/* Run HCI tx handling unlocked */\\n\\thci_uart_tx_wakeup(hu);\\n\\n\\t/* Now that message queued to tty driver, vote for tty clocks off.\\n\\t * It is up to the tty driver to pend the clocks off until tx done.\\n\\t */\\n\\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_OFF, hu);\\n}\\n\\nstatic void hci_ibs_tx_idle_timeout(unsigned long arg)\\n{\\n\\tstruct hci_uart *hu = (struct hci_uart *)arg;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned long flags;\\n\\n\\tBT_DBG(\\\"hu %p idle timeout in %d state\\\", hu, qca->tx_ibs_state);\\n\\n\\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\\n\\t\\t\\t\\t flags, SINGLE_DEPTH_NESTING);\\n\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\t/* TX_IDLE, go to SLEEP */\\n\\t\\tif (send_hci_ibs_cmd(HCI_IBS_SLEEP_IND, hu) < 0) {\\n\\t\\t\\tBT_ERR(\\\"Failed to send SLEEP to device\\\");\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\\n\\t\\tqca->ibs_sent_slps++;\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_tx_vote_off);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Spurrious timeout tx state %d\\\", qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n}\\n\\nstatic void hci_ibs_wake_retrans_timeout(unsigned long arg)\\n{\\n\\tstruct hci_uart *hu = (struct hci_uart *)arg;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned long flags, retrans_delay;\\n\\tbool retransmit = false;\\n\\n\\tBT_DBG(\\\"hu %p wake retransmit timeout in %d state\\\",\\n\\t\\thu, qca->tx_ibs_state);\\n\\n\\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\\n\\t\\t\\t\\t flags, SINGLE_DEPTH_NESTING);\\n\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\t/* No WAKE_ACK, retransmit WAKE */\\n\\t\\tretransmit = true;\\n\\t\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0) {\\n\\t\\t\\tBT_ERR(\\\"Failed to acknowledge device wake up\\\");\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tqca->ibs_sent_wakes++;\\n\\t\\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\\n\\t\\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Spurrious timeout tx state %d\\\", qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\tif (retransmit)\\n\\t\\thci_uart_tx_wakeup(hu);\\n}\\n\\n/* Initialize protocol */\\nstatic int qca_open(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca;\\n\\n\\tBT_DBG(\\\"hu %p qca_open\\\", hu);\\n\\n\\tqca = kzalloc(sizeof(struct qca_data), GFP_ATOMIC);\\n\\tif (!qca)\\n\\t\\treturn -ENOMEM;\\n\\n\\tskb_queue_head_init(&qca->txq);\\n\\tskb_queue_head_init(&qca->tx_wait_q);\\n\\tspin_lock_init(&qca->hci_ibs_lock);\\n\\tqca->workqueue = alloc_ordered_workqueue(\\\"qca_wq\\\", 0);\\n\\tif (!qca->workqueue) {\\n\\t\\tBT_ERR(\\\"QCA Workqueue not initialized properly\\\");\\n\\t\\tkfree(qca);\\n\\t\\treturn -ENOMEM;\\n\\t}\\n\\n\\tINIT_WORK(&qca->ws_awake_rx, qca_wq_awake_rx);\\n\\tINIT_WORK(&qca->ws_awake_device, qca_wq_awake_device);\\n\\tINIT_WORK(&qca->ws_rx_vote_off, qca_wq_serial_rx_clock_vote_off);\\n\\tINIT_WORK(&qca->ws_tx_vote_off, qca_wq_serial_tx_clock_vote_off);\\n\\n\\tqca->hu = hu;\\n\\n\\t/* Assume we start with both sides asleep -- extra wakes OK */\\n\\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\\n\\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\\n\\n\\t/* clocks actually on, but we start votes off */\\n\\tqca->tx_vote = false;\\n\\tqca->rx_vote = false;\\n\\tqca->flags = 0;\\n\\n\\tqca->ibs_sent_wacks = 0;\\n\\tqca->ibs_sent_slps = 0;\\n\\tqca->ibs_sent_wakes = 0;\\n\\tqca->ibs_recv_wacks = 0;\\n\\tqca->ibs_recv_slps = 0;\\n\\tqca->ibs_recv_wakes = 0;\\n\\tqca->vote_last_jif = jiffies;\\n\\tqca->vote_on_ms = 0;\\n\\tqca->vote_off_ms = 0;\\n\\tqca->votes_on = 0;\\n\\tqca->votes_off = 0;\\n\\tqca->tx_votes_on = 0;\\n\\tqca->tx_votes_off = 0;\\n\\tqca->rx_votes_on = 0;\\n\\tqca->rx_votes_off = 0;\\n\\n\\thu->priv = qca;\\n\\n\\tsetup_timer(&qca->wake_retrans_timer, hci_ibs_wake_retrans_timeout,\\n\\t\\t    (u_long)hu);\\n\\tqca->wake_retrans = IBS_WAKE_RETRANS_TIMEOUT_MS;\\n\\n\\tsetup_timer(&qca->tx_idle_timer, hci_ibs_tx_idle_timeout, (u_long)hu);\\n\\tqca->tx_idle_delay = IBS_TX_IDLE_TIMEOUT_MS;\\n\\n\\tBT_DBG(\\\"HCI_UART_QCA open, tx_idle_delay=%u, wake_retrans=%u\\\",\\n\\t       qca->tx_idle_delay, qca->wake_retrans);\\n\\n\\treturn 0;\\n}\\n\\nstatic void qca_debugfs_init(struct hci_dev *hdev)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\tstruct qca_data *qca = hu->priv;\\n\\tstruct dentry *ibs_dir;\\n\\tumode_t mode;\\n\\n\\tif (!hdev->debugfs)\\n\\t\\treturn;\\n\\n\\tibs_dir = debugfs_create_dir(\\\"ibs\\\", hdev->debugfs);\\n\\n\\t/* read only */\\n\\tmode = S_IRUGO;\\n\\tdebugfs_create_u8(\\\"tx_ibs_state\\\", mode, ibs_dir, &qca->tx_ibs_state);\\n\\tdebugfs_create_u8(\\\"rx_ibs_state\\\", mode, ibs_dir, &qca->rx_ibs_state);\\n\\tdebugfs_create_u64(\\\"ibs_sent_sleeps\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_sent_slps);\\n\\tdebugfs_create_u64(\\\"ibs_sent_wakes\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_sent_wakes);\\n\\tdebugfs_create_u64(\\\"ibs_sent_wake_acks\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_sent_wacks);\\n\\tdebugfs_create_u64(\\\"ibs_recv_sleeps\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_recv_slps);\\n\\tdebugfs_create_u64(\\\"ibs_recv_wakes\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_recv_wakes);\\n\\tdebugfs_create_u64(\\\"ibs_recv_wake_acks\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->ibs_recv_wacks);\\n\\tdebugfs_create_bool(\\\"tx_vote\\\", mode, ibs_dir, &qca->tx_vote);\\n\\tdebugfs_create_u64(\\\"tx_votes_on\\\", mode, ibs_dir, &qca->tx_votes_on);\\n\\tdebugfs_create_u64(\\\"tx_votes_off\\\", mode, ibs_dir, &qca->tx_votes_off);\\n\\tdebugfs_create_bool(\\\"rx_vote\\\", mode, ibs_dir, &qca->rx_vote);\\n\\tdebugfs_create_u64(\\\"rx_votes_on\\\", mode, ibs_dir, &qca->rx_votes_on);\\n\\tdebugfs_create_u64(\\\"rx_votes_off\\\", mode, ibs_dir, &qca->rx_votes_off);\\n\\tdebugfs_create_u64(\\\"votes_on\\\", mode, ibs_dir, &qca->votes_on);\\n\\tdebugfs_create_u64(\\\"votes_off\\\", mode, ibs_dir, &qca->votes_off);\\n\\tdebugfs_create_u32(\\\"vote_on_ms\\\", mode, ibs_dir, &qca->vote_on_ms);\\n\\tdebugfs_create_u32(\\\"vote_off_ms\\\", mode, ibs_dir, &qca->vote_off_ms);\\n\\n\\t/* read/write */\\n\\tmode = S_IRUGO | S_IWUSR;\\n\\tdebugfs_create_u32(\\\"wake_retrans\\\", mode, ibs_dir, &qca->wake_retrans);\\n\\tdebugfs_create_u32(\\\"tx_idle_delay\\\", mode, ibs_dir,\\n\\t\\t\\t   &qca->tx_idle_delay);\\n}\\n\\n/* Flush protocol data */\\nstatic int qca_flush(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p qca flush\\\", hu);\\n\\n\\tskb_queue_purge(&qca->tx_wait_q);\\n\\tskb_queue_purge(&qca->txq);\\n\\n\\treturn 0;\\n}\\n\\n/* Close protocol */\\nstatic int qca_close(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p qca close\\\", hu);\\n\\n\\tserial_clock_vote(HCI_IBS_VOTE_STATS_UPDATE, hu);\\n\\n\\tskb_queue_purge(&qca->tx_wait_q);\\n\\tskb_queue_purge(&qca->txq);\\n\\tdel_timer(&qca->tx_idle_timer);\\n\\tdel_timer(&qca->wake_retrans_timer);\\n\\tdestroy_workqueue(qca->workqueue);\\n\\tqca->hu = NULL;\\n\\n\\tkfree_skb(qca->rx_skb);\\n\\n\\thu->priv = NULL;\\n\\n\\tkfree(qca);\\n\\n\\treturn 0;\\n}\\n\\n/* Called upon a wake-up-indication from the device.\\n */\\nstatic void device_want_to_wakeup(struct hci_uart *hu)\\n{\\n\\tunsigned long flags;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p want to wake up\\\", hu);\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\tqca->ibs_recv_wakes++;\\n\\n\\tswitch (qca->rx_ibs_state) {\\n\\tcase HCI_IBS_RX_ASLEEP:\\n\\t\\t/* Make sure clock is on - we may have turned clock off since\\n\\t\\t * receiving the wake up indicator awake rx clock.\\n\\t\\t */\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_awake_rx);\\n\\t\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\t\\treturn;\\n\\n\\tcase HCI_IBS_RX_AWAKE:\\n\\t\\t/* Always acknowledge device wake up,\\n\\t\\t * sending IBS message doesn't count as TX ON.\\n\\t\\t */\\n\\t\\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0) {\\n\\t\\t\\tBT_ERR(\\\"Failed to acknowledge device wake up\\\");\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tqca->ibs_sent_wacks++;\\n\\t\\tbreak;\\n\\n\\tdefault:\\n\\t\\t/* Any other state is illegal */\\n\\t\\tBT_ERR(\\\"Received HCI_IBS_WAKE_IND in rx state %d\\\",\\n\\t\\t       qca->rx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\n/* Called upon a sleep-indication from the device.\\n */\\nstatic void device_want_to_sleep(struct hci_uart *hu)\\n{\\n\\tunsigned long flags;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p want to sleep\\\", hu);\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\tqca->ibs_recv_slps++;\\n\\n\\tswitch (qca->rx_ibs_state) {\\n\\tcase HCI_IBS_RX_AWAKE:\\n\\t\\t/* Update state */\\n\\t\\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\\n\\t\\t/* Vote off rx clock under workqueue */\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_rx_vote_off);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_RX_ASLEEP:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\t/* Any other state is illegal */\\n\\t\\tBT_ERR(\\\"Received HCI_IBS_SLEEP_IND in rx state %d\\\",\\n\\t\\t       qca->rx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n}\\n\\n/* Called upon wake-up-acknowledgement from the device\\n */\\nstatic void device_woke_up(struct hci_uart *hu)\\n{\\n\\tunsigned long flags, idle_delay;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tstruct sk_buff *skb = NULL;\\n\\n\\tBT_DBG(\\\"hu %p woke up\\\", hu);\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\tqca->ibs_recv_wacks++;\\n\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\t/* Expect one if we send 2 WAKEs */\\n\\t\\tBT_DBG(\\\"Received HCI_IBS_WAKE_ACK in tx state %d\\\",\\n\\t\\t       qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\t/* Send pending packets */\\n\\t\\twhile ((skb = skb_dequeue(&qca->tx_wait_q)))\\n\\t\\t\\tskb_queue_tail(&qca->txq, skb);\\n\\n\\t\\t/* Switch timers and change state to HCI_IBS_TX_AWAKE */\\n\\t\\tdel_timer(&qca->wake_retrans_timer);\\n\\t\\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\\n\\t\\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\\n\\t\\tqca->tx_ibs_state = HCI_IBS_TX_AWAKE;\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\t\\t/* Fall through */\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Received HCI_IBS_WAKE_ACK in tx state %d\\\",\\n\\t\\t       qca->tx_ibs_state);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\t/* Actually send the packets */\\n\\thci_uart_tx_wakeup(hu);\\n}\\n\\n/* Enqueue frame for transmittion (padding, crc, etc) may be called from\\n * two simultaneous tasklets.\\n */\\nstatic int qca_enqueue(struct hci_uart *hu, struct sk_buff *skb)\\n{\\n\\tunsigned long flags = 0, idle_delay;\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tBT_DBG(\\\"hu %p qca enq skb %p tx_ibs_state %d\\\", hu, skb,\\n\\t       qca->tx_ibs_state);\\n\\n\\t/* Prepend skb with frame type */\\n\\tmemcpy(skb_push(skb, 1), &hci_skb_pkt_type(skb), 1);\\n\\n\\t/* Don't go to sleep in middle of patch download or\\n\\t * Out-Of-Band(GPIOs control) sleep is selected.\\n\\t */\\n\\tif (!test_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags)) {\\n\\t\\tskb_queue_tail(&qca->txq, skb);\\n\\t\\treturn 0;\\n\\t}\\n\\n\\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\\n\\n\\t/* Act according to current state */\\n\\tswitch (qca->tx_ibs_state) {\\n\\tcase HCI_IBS_TX_AWAKE:\\n\\t\\tBT_DBG(\\\"Device awake, sending normally\\\");\\n\\t\\tskb_queue_tail(&qca->txq, skb);\\n\\t\\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\\n\\t\\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_ASLEEP:\\n\\t\\tBT_DBG(\\\"Device asleep, waking up and queueing packet\\\");\\n\\t\\t/* Save packet for later */\\n\\t\\tskb_queue_tail(&qca->tx_wait_q, skb);\\n\\n\\t\\tqca->tx_ibs_state = HCI_IBS_TX_WAKING;\\n\\t\\t/* Schedule a work queue to wake up device */\\n\\t\\tqueue_work(qca->workqueue, &qca->ws_awake_device);\\n\\t\\tbreak;\\n\\n\\tcase HCI_IBS_TX_WAKING:\\n\\t\\tBT_DBG(\\\"Device waking up, queueing packet\\\");\\n\\t\\t/* Transient state; just keep packet for later */\\n\\t\\tskb_queue_tail(&qca->tx_wait_q, skb);\\n\\t\\tbreak;\\n\\n\\tdefault:\\n\\t\\tBT_ERR(\\\"Illegal tx state: %d (losing packet)\\\",\\n\\t\\t       qca->tx_ibs_state);\\n\\t\\tkfree_skb(skb);\\n\\t\\tbreak;\\n\\t}\\n\\n\\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\\n\\n\\treturn 0;\\n}\\n\\nstatic int qca_ibs_sleep_ind(struct hci_dev *hdev, struct sk_buff *skb)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\n\\tBT_DBG(\\\"hu %p recv hci ibs cmd 0x%x\\\", hu, HCI_IBS_SLEEP_IND);\\n\\n\\tdevice_want_to_sleep(hu);\\n\\n\\tkfree_skb(skb);\\n\\treturn 0;\\n}\\n\\nstatic int qca_ibs_wake_ind(struct hci_dev *hdev, struct sk_buff *skb)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\n\\tBT_DBG(\\\"hu %p recv hci ibs cmd 0x%x\\\", hu, HCI_IBS_WAKE_IND);\\n\\n\\tdevice_want_to_wakeup(hu);\\n\\n\\tkfree_skb(skb);\\n\\treturn 0;\\n}\\n\\nstatic int qca_ibs_wake_ack(struct hci_dev *hdev, struct sk_buff *skb)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\n\\tBT_DBG(\\\"hu %p recv hci ibs cmd 0x%x\\\", hu, HCI_IBS_WAKE_ACK);\\n\\n\\tdevice_woke_up(hu);\\n\\n\\tkfree_skb(skb);\\n\\treturn 0;\\n}\\n\\n#define QCA_IBS_SLEEP_IND_EVENT \\t.type = HCI_IBS_SLEEP_IND, \\t.hlen = 0, \\t.loff = 0, \\t.lsize = 0, \\t.maxlen = HCI_MAX_IBS_SIZE\\n\\n#define QCA_IBS_WAKE_IND_EVENT \\t.type = HCI_IBS_WAKE_IND, \\t.hlen = 0, \\t.loff = 0, \\t.lsize = 0, \\t.maxlen = HCI_MAX_IBS_SIZE\\n\\n#define QCA_IBS_WAKE_ACK_EVENT \\t.type = HCI_IBS_WAKE_ACK, \\t.hlen = 0, \\t.loff = 0, \\t.lsize = 0, \\t.maxlen = HCI_MAX_IBS_SIZE\\n\\nstatic const struct h4_recv_pkt qca_recv_pkts[] = {\\n\\t{ H4_RECV_ACL,             .recv = hci_recv_frame    },\\n\\t{ H4_RECV_SCO,             .recv = hci_recv_frame    },\\n\\t{ H4_RECV_EVENT,           .recv = hci_recv_frame    },\\n\\t{ QCA_IBS_WAKE_IND_EVENT,  .recv = qca_ibs_wake_ind  },\\n\\t{ QCA_IBS_WAKE_ACK_EVENT,  .recv = qca_ibs_wake_ack  },\\n\\t{ QCA_IBS_SLEEP_IND_EVENT, .recv = qca_ibs_sleep_ind },\\n};\\n\\nstatic int qca_recv(struct hci_uart *hu, const void *data, int count)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\tif (!test_bit(HCI_UART_REGISTERED, &hu->flags))\\n\\t\\treturn -EUNATCH;\\n\\n\\tqca->rx_skb = h4_recv_buf(hu->hdev, qca->rx_skb, data, count,\\n\\t\\t\\t\\t  qca_recv_pkts, ARRAY_SIZE(qca_recv_pkts));\\n\\tif (IS_ERR(qca->rx_skb)) {\\n\\t\\tint err = PTR_ERR(qca->rx_skb);\\n\\t\\tBT_ERR(\\\"%s: Frame reassembly failed (%d)\\\", hu->hdev->name, err);\\n\\t\\tqca->rx_skb = NULL;\\n\\t\\treturn err;\\n\\t}\\n\\n\\treturn count;\\n}\\n\\nstatic struct sk_buff *qca_dequeue(struct hci_uart *hu)\\n{\\n\\tstruct qca_data *qca = hu->priv;\\n\\n\\treturn skb_dequeue(&qca->txq);\\n}\\n\\nstatic uint8_t qca_get_baudrate_value(int speed)\\n{\\n\\tswitch (speed) {\\n\\tcase 9600:\\n\\t\\treturn QCA_BAUDRATE_9600;\\n\\tcase 19200:\\n\\t\\treturn QCA_BAUDRATE_19200;\\n\\tcase 38400:\\n\\t\\treturn QCA_BAUDRATE_38400;\\n\\tcase 57600:\\n\\t\\treturn QCA_BAUDRATE_57600;\\n\\tcase 115200:\\n\\t\\treturn QCA_BAUDRATE_115200;\\n\\tcase 230400:\\n\\t\\treturn QCA_BAUDRATE_230400;\\n\\tcase 460800:\\n\\t\\treturn QCA_BAUDRATE_460800;\\n\\tcase 500000:\\n\\t\\treturn QCA_BAUDRATE_500000;\\n\\tcase 921600:\\n\\t\\treturn QCA_BAUDRATE_921600;\\n\\tcase 1000000:\\n\\t\\treturn QCA_BAUDRATE_1000000;\\n\\tcase 2000000:\\n\\t\\treturn QCA_BAUDRATE_2000000;\\n\\tcase 3000000:\\n\\t\\treturn QCA_BAUDRATE_3000000;\\n\\tcase 3500000:\\n\\t\\treturn QCA_BAUDRATE_3500000;\\n\\tdefault:\\n\\t\\treturn QCA_BAUDRATE_115200;\\n\\t}\\n}\\n\\nstatic int qca_set_baudrate(struct hci_dev *hdev, uint8_t baudrate)\\n{\\n\\tstruct hci_uart *hu = hci_get_drvdata(hdev);\\n\\tstruct qca_data *qca = hu->priv;\\n\\tstruct sk_buff *skb;\\n\\tu8 cmd[] = { 0x01, 0x48, 0xFC, 0x01, 0x00 };\\n\\n\\tif (baudrate > QCA_BAUDRATE_3000000)\\n\\t\\treturn -EINVAL;\\n\\n\\tcmd[4] = baudrate;\\n\\n\\tskb = bt_skb_alloc(sizeof(cmd), GFP_ATOMIC);\\n\\tif (!skb) {\\n\\t\\tBT_ERR(\\\"Failed to allocate memory for baudrate packet\\\");\\n\\t\\treturn -ENOMEM;\\n\\t}\\n\\n\\t/* Assign commands to change baudrate and packet type. */\\n\\tmemcpy(skb_put(skb, sizeof(cmd)), cmd, sizeof(cmd));\\n\\thci_skb_pkt_type(skb) = HCI_COMMAND_PKT;\\n\\n\\tskb_queue_tail(&qca->txq, skb);\\n\\thci_uart_tx_wakeup(hu);\\n\\n\\t/* wait 300ms to change new baudrate on controller side\\n\\t * controller will come back after they receive this HCI command\\n\\t * then host can communicate with new baudrate to controller\\n\\t */\\n\\tset_current_state(TASK_UNINTERRUPTIBLE);\\n\\tschedule_timeout(msecs_to_jiffies(BAUDRATE_SETTLE_TIMEOUT_MS));\\n\\tset_current_state(TASK_INTERRUPTIBLE);\\n\\n\\treturn 0;\\n}\\n\\nstatic int qca_setup(struct hci_uart *hu)\\n{\\n\\tstruct hci_dev *hdev = hu->hdev;\\n\\tstruct qca_data *qca = hu->priv;\\n\\tunsigned int speed, qca_baudrate = QCA_BAUDRATE_115200;\\n\\tint ret;\\n\\n\\tBT_INFO(\\\"%s: ROME setup\\\", hdev->name);\\n\\n\\t/* Patch downloading has to be done without IBS mode */\\n\\tclear_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\\n\\n\\t/* Setup initial baudrate */\\n\\tspeed = 0;\\n\\tif (hu->init_speed)\\n\\t\\tspeed = hu->init_speed;\\n\\telse if (hu->proto->init_speed)\\n\\t\\tspeed = hu->proto->init_speed;\\n\\n\\tif (speed)\\n\\t\\thci_uart_set_baudrate(hu, speed);\\n\\n\\t/* Setup user speed if needed */\\n\\tspeed = 0;\\n\\tif (hu->oper_speed)\\n\\t\\tspeed = hu->oper_speed;\\n\\telse if (hu->proto->oper_speed)\\n\\t\\tspeed = hu->proto->oper_speed;\\n\\n\\tif (speed) {\\n\\t\\tqca_baudrate = qca_get_baudrate_value(speed);\\n\\n\\t\\tBT_INFO(\\\"%s: Set UART speed to %d\\\", hdev->name, speed);\\n\\t\\tret = qca_set_baudrate(hdev, qca_baudrate);\\n\\t\\tif (ret) {\\n\\t\\t\\tBT_ERR(\\\"%s: Failed to change the baud rate (%d)\\\",\\n\\t\\t\\t       hdev->name, ret);\\n\\t\\t\\treturn ret;\\n\\t\\t}\\n\\t\\thci_uart_set_baudrate(hu, speed);\\n\\t}\\n\\n\\t/* Setup patch / NVM configurations */\\n\\tret = qca_uart_setup_rome(hdev, qca_baudrate);\\n\\tif (!ret) {\\n\\t\\tset_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\\n\\t\\tqca_debugfs_init(hdev);\\n\\t}\\n\\n\\t/* Setup bdaddr */\\n\\thu->hdev->set_bdaddr = qca_set_bdaddr_rome;\\n\\n\\treturn ret;\\n}\\n\\nstatic struct hci_uart_proto qca_proto = {\\n\\t.id\\t\\t= HCI_UART_QCA,\\n\\t.name\\t\\t= \\\"QCA\\\",\\n\\t.manufacturer\\t= 29,\\n\\t.init_speed\\t= 115200,\\n\\t.oper_speed\\t= 3000000,\\n\\t.open\\t\\t= qca_open,\\n\\t.close\\t\\t= qca_close,\\n\\t.flush\\t\\t= qca_flush,\\n\\t.setup\\t\\t= qca_setup,\\n\\t.recv\\t\\t= qca_recv,\\n\\t.enqueue\\t= qca_enqueue,\\n\\t.dequeue\\t= qca_dequeue,\\n};\\n\\nint __init qca_init(void)\\n{\\n\\treturn hci_uart_register_proto(&qca_proto);\\n}\\n\\nint __exit qca_deinit(void)\\n{\\n\\treturn hci_uart_unregister_proto(&qca_proto);\\n}\\n\";\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t!function () {\n\t\n\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\t\n\t\tvar chars = ['@', '#', '$', '=', '*', '!', ';', ':', '~', '-', ',', '.', '&nbsp;', '&nbsp;'];\n\t\n\t\tchars = [\"&nbsp;\", \"&nbsp;\", \".\", \",\", \"-\", \"~\", \":\", \";\", \"!\", \"*\", \"=\", \"$\", \"#\", \"@\"];\n\t\tvar charLen = chars.length - 1;\n\t\tfunction getChar(val) {\n\t\t\treturn chars[parseInt(val * charLen, 10)];\n\t\t}\n\t\n\t\tfunction logError(err) {\n\t\t\tif (console && console.log) console.log('Error!', err);return false;\n\t\t}\n\t\n\t\tfunction Jscii(params) {\n\t\t\tvar self = this;\n\t\n\t\t\tvar el = this.el = params.el;\n\t\t\tthis.container = params.container;\n\t\t\tthis.fn = typeof params.fn === 'function' ? params.fn : null;\n\t\t\tthis.width = typeof params.width === 'number' ? params.width : 150;\n\t\t\tthis.color = !!params.color;\n\t\n\t\t\tthis.canvas = document.createElement('canvas');\n\t\t\tthis.ctx = this.canvas.getContext('2d');\n\t\t\tvar nodeName = el.nodeName;\n\t\t\tif (nodeName === 'IMG') {\n\t\t\t\tself.render();\n\t\t\t\tel.addEventListener('load', function () {\n\t\t\t\t\tself.render();\n\t\t\t\t});\n\t\t\t} else if (nodeName === 'VIDEO') {\n\t\t\t\tthis.interval = typeof params.interval === 'number' ? params.interval : 15;\n\t\t\t\tthis.webrtc = !!params.webrtc;\n\t\n\t\t\t\tif (this.webrtc) {\n\t\t\t\t\tif (typeof navigator.getUserMedia !== 'function') {\n\t\t\t\t\t\treturn logError(el.innerHTML = 'Error: browser does not support WebRTC');\n\t\t\t\t\t}\n\t\t\t\t\tnavigator.getUserMedia({ video: true, audio: false }, function (localMediaStream) {\n\t\t\t\t\t\tself.mediaStream = localMediaStream;\n\t\t\t\t\t\tel.src = (window.URL || window.webkitURL).createObjectURL(localMediaStream);\n\t\t\t\t\t}, logError);\n\t\t\t\t}\n\t\t\t\tel.addEventListener('loadeddata', function () {\n\t\t\t\t\tself.play();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\n\t\tJscii.prototype.play = function () {\n\t\t\tvar self = this;\n\t\t\tself.pause().videoTimer = setInterval(function () {\n\t\t\t\tif (self.mediaStream || !self.webrtc) self.render();\n\t\t\t}, self.interval);\n\t\t\treturn self;\n\t\t};\n\t\n\t\tJscii.prototype.pause = function () {\n\t\t\tif (this.videoTimer) clearInterval(this.videoTimer);\n\t\t\treturn this;\n\t\t};\n\t\n\t\tJscii.prototype.dimension = function (width, height) {\n\t\t\tif (typeof width === 'number' && typeof height === 'number') {\n\t\t\t\tthis._scaledWidth = this.canvas.width = width;\n\t\t\t\tthis._scaledHeight = this.canvas.height = height;\n\t\t\t\treturn this;\n\t\t\t} else {\n\t\t\t\treturn { width: this._scaledWidth, height: this._scaledHeight };\n\t\t\t}\n\t\t};\n\t\n\t\tJscii.prototype.render = function () {\n\t\t\tvar el = this.el,\n\t\t\t    nodeName = el.nodeName,\n\t\t\t    ratio;\n\t\t\tvar dim = this.dimension(),\n\t\t\t    width,\n\t\t\t    height;\n\t\t\tif (!dim.width || !dim.height) {\n\t\t\t\tratio = nodeName === 'IMG' ? el.height / el.width : el.videoHeight / el.videoWidth;\n\t\t\t\tthis.dimension(this.width, parseInt(this.width * ratio, 10));\n\t\t\t\tdim = this.dimension();\n\t\t\t}\n\t\t\twidth = dim.width;\n\t\t\theight = dim.height;\n\t\n\t\t\tif (!width || !height) return;\n\t\n\t\t\tthis.ctx.drawImage(this.el, 0, 0, width, height);\n\t\t\tthis.imageData = this.ctx.getImageData(0, 0, width, height).data;\n\t\t\tvar asciiStr = this.getAsciiString();\n\t\t\tif (this.container) this.container.innerHTML = asciiStr;\n\t\t\tif (this.fn) this.fn(asciiStr);\n\t\t};\n\t\n\t\tJscii.prototype.getAsciiString = function () {\n\t\t\tvar dim = this.dimension(),\n\t\t\t    width = dim.width,\n\t\t\t    height = dim.height;\n\t\t\tvar len = width * height,\n\t\t\t    d = this.imageData,\n\t\t\t    str = '';\n\t\n\t\t\tvar getRGB = function getRGB(i) {\n\t\t\t\treturn [d[i = i * 4], d[i + 1], d[i + 2]];\n\t\t\t};\n\t\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tif (i % width === 0) str += '\\n';\n\t\t\t\tvar rgb = getRGB(i);\n\t\t\t\tvar val = Math.max(rgb[0], rgb[1], rgb[2]) / 255;\n\t\t\t\tif (this.color) str += '<font style=\"color: rgb(' + rgb.join(',') + ')\">' + getChar(val) + '</font>';else str += getChar(val);\n\t\t\t}\n\t\t\treturn str;\n\t\t};\n\t\n\t\twindow.Jscii = Jscii;\n\t}();\n\n/***/ },\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 52 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 53 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 54 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 55 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 56 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 57 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 58 */,\n/* 59 */,\n/* 60 */,\n/* 61 */,\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/amy.a7fc195.png\";\n\n/***/ },\n/* 71 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/charna.aeb5628.png\";\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/del.92abdc1.png\";\n\n/***/ },\n/* 73 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/ian.638d02f.png\";\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/keith.6b63371.png\";\n\n/***/ },\n/* 75 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/tj.3bd54f1.png\";\n\n/***/ },\n/* 76 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"static/img/viola.8d75b50.png\";\n\n/***/ },\n/* 77 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(52)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(29)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(84)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 78 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(57)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(30)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(90)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-c73afbb0\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 79 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(53)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(31)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(85)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-1a08c484\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 80 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(56)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(32)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(89)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-b0f73184\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 81 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(51)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(33)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(83)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-1027e76e\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 82 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_exports__, __vue_options__\n\tvar __vue_styles__ = {}\n\t\n\t/* styles */\n\t__webpack_require__(55)\n\t\n\t/* script */\n\t__vue_exports__ = __webpack_require__(34)\n\t\n\t/* template */\n\tvar __vue_template__ = __webpack_require__(87)\n\t__vue_options__ = __vue_exports__ = __vue_exports__ || {}\n\tif (\n\t  typeof __vue_exports__.default === \"object\" ||\n\t  typeof __vue_exports__.default === \"function\"\n\t) {\n\t__vue_options__ = __vue_exports__ = __vue_exports__.default\n\t}\n\tif (typeof __vue_options__ === \"function\") {\n\t  __vue_options__ = __vue_options__.options\n\t}\n\t\n\t__vue_options__.render = __vue_template__.render\n\t__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\t__vue_options__._scopeId = \"data-v-7768a5b6\"\n\t\n\tmodule.exports = __vue_exports__\n\n\n/***/ },\n/* 83 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"rules\"\n\t    }\n\t  }, [(_vm.step == 'board') ? _c('div', [_c('div', {\n\t    attrs: {\n\t      \"id\": \"board-title\"\n\t    }\n\t  }, [_vm._v(\"\\n      Active Rules\\n    \")]), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"board\"\n\t    }\n\t  }, _vm._l((_vm.rules), function(rule) {\n\t    return _c('div', [_c('div', {\n\t      staticClass: \"rule\",\n\t      class: {\n\t        removing: rule.removing\n\t      }\n\t    }, [_vm._v(\"\\n          \" + _vm._s(rule.text) + \"\\n        \")])])\n\t  }))]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'new rule') ? _c('div', [_c('div', {\n\t    class: {\n\t      'flash-text': _vm.newRuleStep == 'new rule'\n\t    },\n\t    attrs: {\n\t      \"id\": \"new-rule\"\n\t    }\n\t  }, [(_vm.newRuleStep == 'new rule') ? _c('div', [_c('div', {\n\t    staticClass: \"flash-text\"\n\t  }, [_vm._v(\"\\n          NEW RULE\\n        \")])]) : _vm._e(), _vm._v(\" \"), (_vm.newRuleStep == 'read rule') ? _c('div', [_c('TypeAndSay', {\n\t    attrs: {\n\t      \"timeout\": 40,\n\t      \"doneReading\": _vm.doneReading\n\t    }\n\t  }, [_vm._v(\"\\n          \" + _vm._s(_vm.newRuleText) + \"\\n        \")])], 1) : _vm._e()])]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'closer') ? _c('div', [_c('div', {\n\t    class: {\n\t      'flash-text': _vm.closerStep == 'closer title'\n\t    },\n\t    attrs: {\n\t      \"id\": \"closer\"\n\t    }\n\t  }, [(_vm.closerStep == 'closer title') ? _c('div', [_c('div', {\n\t    staticClass: \"flash-text\"\n\t  }, [_vm._v(\"\\n          CLOSER\\n        \")])]) : _vm._e(), _vm._v(\" \"), (_vm.closerStep == 'read closer') ? _c('div', [_c('TypeAndSay', {\n\t    attrs: {\n\t      \"timeout\": 40,\n\t      \"doneReading\": _vm.closerFunc\n\t    }\n\t  }, [_vm._v(\"\\n          \" + _vm._s(_vm.closerText) + \"\\n        \")])], 1) : _vm._e()])]) : _vm._e()])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 84 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"app\"\n\t    }\n\t  }, [(_vm.step.current == 'boot') ? _c('div', [_c('BootAnimation', {\n\t    attrs: {\n\t      \"showStep\": _vm.step\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'intro') ? _c('div', [_c('Intro', {\n\t    attrs: {\n\t      \"names\": _vm.names,\n\t      \"step\": _vm.step\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'rules') ? _c('div', [_c('Rules', {\n\t    attrs: {\n\t      \"ruleGens\": _vm.rules,\n\t      \"names\": _vm.names\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'simulate') ? _c('div', [_c('Simulation', {\n\t    attrs: {\n\t      \"ruleGens\": _vm.rules,\n\t      \"names\": _vm.names\n\t    }\n\t  })], 1) : _vm._e()])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 85 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"boot-animation\"\n\t    }\n\t  }, [(_vm.step == 'fakeCode') ? _c('div', {\n\t    attrs: {\n\t      \"id\": \"fakecode\"\n\t    }\n\t  }, [_c('pre', [_vm._v(\"\\n        \"), _c('TypeWriter', {\n\t    attrs: {\n\t      \"timeout\": 40,\n\t      \"spliton\": '\\n'\n\t    }\n\t  }, [_vm._v(_vm._s(_vm.fakeCode))]), _vm._v(\"\\n      \")], 1)]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'greenFlash') ? _c('div', {\n\t    staticClass: \"glitch\",\n\t    attrs: {\n\t      \"id\": \"green-flash\"\n\t    }\n\t  }) : _vm._e(), _vm._v(\" \"), (_vm.step == 'ascii') ? _c('div', {\n\t    attrs: {\n\t      \"id\": \"ascii\"\n\t    }\n\t  }, [_c('pre', {\n\t    attrs: {\n\t      \"id\": \"loading\"\n\t    }\n\t  }, [_vm._v(\"\\n        \"), _c('TypeWriter', {\n\t    attrs: {\n\t      \"timeout\": 60\n\t    }\n\t  }, [_vm._v(\"\\n\\nCalibrating comedic timing...\\nNullifying transactions...\\nFinding light...\\nSimulating montage...\\n\\n        \")]), _vm._v(\"        \\n      \")], 1), _vm._v(\" \"), _c('AsciiImage', {\n\t    attrs: {\n\t      \"imagename\": _vm.asciiName\n\t    }\n\t  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step == 'title') ? _c('div', {\n\t    class: {\n\t      inverted: _vm.titleInverted\n\t    },\n\t    attrs: {\n\t      \"id\": \"title\"\n\t    }\n\t  }, [_c('div', [_vm._v(\"IMPROV\")]), _vm._v(\" \"), _c('div', [_vm._v(\"GOD\")])]) : _vm._e()])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 86 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"typewriter\"\n\t  }, [_vm._v(\"\\n  \" + _vm._s(_vm.text) + \"\\n\")])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 87 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"simulation\"\n\t    },\n\t    on: {\n\t      \"click\": _vm.simulateShow\n\t    }\n\t  }, [_c('h1', [_vm._v(\"Click me to simulate a show\")]), _vm._v(\" \"), _c('div', {\n\t    attrs: {\n\t      \"id\": \"timeline\"\n\t    }\n\t  }, _vm._l((_vm.actions), function(action, i) {\n\t    return _c('div', {\n\t      staticClass: \"action\",\n\t      style: ({\n\t        left: _vm.getActionPos(action, _vm.actions)\n\t      })\n\t    }, [_c('div', {\n\t      staticClass: \"rules\",\n\t      style: ({\n\t        height: action.rules * 8 + 18 + 'px',\n\t        top: -action.rules * 8 - 18 + 'px'\n\t      })\n\t    }, [_c('span', {\n\t      staticClass: \"text\"\n\t    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.rules) + \"\\n\\t\\t\\t\\t\")])]), _vm._v(\" \"), _c('div', {\n\t      staticClass: \"message\",\n\t      style: ({\n\t        height: i % 5 * 28 + 20 + 'px'\n\t      })\n\t    }, [_c('span', {\n\t      staticClass: \"text\"\n\t    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.message) + \" \" + _vm._s(_vm.formatTime(action.time)) + \"\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\")])])])\n\t  }))])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 88 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"type-and-say\"\n\t    }\n\t  }, [_c('TypeWriter', {\n\t    attrs: {\n\t      \"volume\": _vm.typingVolume,\n\t      \"timeout\": _vm.timeout\n\t    }\n\t  }, [_vm._t(\"default\")], 2)], 1)\n\t},staticRenderFns: []}\n\n/***/ },\n/* 89 */\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    attrs: {\n\t      \"id\": \"intro\"\n\t    }\n\t  }, [_c('TypeAndSay', [_vm._v(_vm._s(_vm.message))])], 1)\n\t},staticRenderFns: []}\n\n/***/ },\n/* 90 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"ascii-image\",\n\t    class: {\n\t      loaded: _vm.asciiLoaded\n\t    }\n\t  }, [_c('img', {\n\t    attrs: {\n\t      \"id\": \"image-del\",\n\t      \"src\": __webpack_require__(72)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-amy\",\n\t      \"src\": __webpack_require__(70)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-charna\",\n\t      \"src\": __webpack_require__(71)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-keith\",\n\t      \"src\": __webpack_require__(74)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-tj\",\n\t      \"src\": __webpack_require__(75)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-ian\",\n\t      \"src\": __webpack_require__(73)\n\t    }\n\t  }), _vm._v(\" \"), _c('img', {\n\t    attrs: {\n\t      \"id\": \"image-viola\",\n\t      \"src\": __webpack_require__(76)\n\t    }\n\t  }), _vm._v(\" \"), _c('pre', {\n\t    staticClass: \"ascii-text\"\n\t  }, [_vm._v(\"\\n    \" + _vm._s(_vm.text) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n\t    staticClass: \"loading-cover\"\n\t  })])\n\t},staticRenderFns: []}\n\n/***/ },\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */\n/***/ function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.d02d948d939e74ce69e4.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports = {\n\tFlip15: function(durationOfShow) {\n\n\t\tthis.durationOfShow = durationOfShow;\n\t\tthis.timeCreated = Date.now();\n\t\tthis.activeRules = 0;\n\t\tthis.timeOfLastRule = 0;\n\t\tthis.timeOfLastFlip = 0;\n\n\t\tthis.getAction = (timeElapsed) => {\n\t\t\tif (!timeElapsed) {\n\t\t\t\ttimeElapsed = Date.now() - this.timeCreated;;\n\t\t\t}\n\t\t\tvar timeSinceLastRule = timeElapsed - this.timeOfLastRule;\n\t\t\tvar timeSinceLastFlip = timeElapsed - this.timeOfLastFlip;\n\t\t\tvar percentComplete = timeElapsed / this.durationOfShow;\n\t\t\tvar perComSq = (timeElapsed * timeElapsed) / (this.durationOfShow * this.durationOfShow);\n\t\t\tif (timeElapsed > durationOfShow) {\n\t\t\t\treturn 'end show'\n\t\t\t}\n\t\t\tif (timeElapsed < 90 * 1000) {\n\t\t\t\treturn 'nothing'\n\t\t\t}\n\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\tthis.timeOfLastFlip = timeElapsed\n\n\t\t\t\tlet removeOdds = (Math.pow(this.activeRules, 3) + 4) * ((1-perComSq) * .8 + .2);\n\t\t\t\tlet addOdds = perComSq * 30 + 4;\n\t\t\t\tlet nothingOdds = Math.max(1 - (timeSinceLastRule / (90 * 1000)), 0) * ((1 - percentComplete) * 100)\n\n\n\t\t\t\tlet sum = removeOdds + addOdds + nothingOdds;\n\t\t\t\tlet removeBound = removeOdds / sum;\n\t\t\t\tlet addBound = addOdds / sum + removeBound;\n\n\t\t\t\tlet r = Math.random()\n\t\t\t\tif (r < removeBound) {\n\t\t\t\t\tif (this.activeRules > 0) {\n\t\t\t\t\t\tthis.activeRules--;\n\t\t\t\t\t\treturn 'removeRule'\n\t\t\t\t\t}\n\t\t\t\t} else if (r < addBound) {\n\t\t\t\t\tthis.timeOfLastRule = timeElapsed;\n\t\t\t\t\tthis.activeRules++;\n\t\t\t\t\treturn 'addRule'\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 'nothing';\n\t\t}\n\n\t},\n\tEvery15: function(durationOfShow) {\n\n\t\tthis.durationOfShow = durationOfShow;\n\t\tthis.timeCreated = Date.now();\n\t\tthis.activeRules = 0;\n\t\tthis.timeOfLastRule = 0;\n\t\tthis.timeOfLastFlip = 0;\n\n\t\tthis.getAction = () => {\n\t\t\tvar timeElapsed = Date.now() - this.timeCreated;\n\t\t\tvar timeSinceLastRule = Date.now() - this.timeOfLastRule;\n\t\t\tvar timeSinceLastFlip = Date.now() - this.timeOfLastFlip;\n\t\t\tvar percentComplete = timeElapsed / this.durationOfShow\n\t\t\tif (timeSinceLastFlip > 15000) {\n\t\t\t\tthis.timeOfLastFlip = Date.now()\n\t\t\t\tif (Math.random() < (this.activeRules/(10*percentComplete + 2))) {\n\t\t\t\t\tthis.activeRules--;\n\t\t\t\t\treturn 'removeRule'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.timeOfLastRule = Date.now();\n\t\t\t\t\tthis.activeRules++;\n\t\t\t\t\treturn 'addRule'\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 'nothing';\n\t\t}\n\n\t},\n\tJustClose: function(durationOfShow) {\n\t\tthis.getAction = () => {\n\t\t\treturn 'end show'\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Strategies.js","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./TypeAndSay.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-95baebe8!vue-loader/lib/selector?type=template&index=0!./TypeAndSay.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TypeAndSay.vue\n// module id = 24\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-37ef7f2a&scoped=true!vue-loader/lib/selector?type=styles&index=0!./TypeWriter.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./TypeWriter.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-37ef7f2a!vue-loader/lib/selector?type=template&index=0!./TypeWriter.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-37ef7f2a\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TypeWriter.vue\n// module id = 25\n// module chunks = 2","<template>\n  <div id=\"app\">\n    <div v-if=\"step.current == 'boot'\">\n      <BootAnimation :showStep=\"step\"></BootAnimation>\n    </div>\n    <div v-if=\"step.current == 'intro'\">\n      <Intro :names=\"names\" :step=\"step\"></Intro>\n    </div>\n    <div v-if=\"step.current == 'rules'\">\n      <Rules :ruleGens=\"rules\" :names=\"names\"></Rules>\n    </div>\n    <div v-if=\"step.current == 'simulate'\">\n      <Simulation :ruleGens=\"rules\" :names=\"names\"></Simulation>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BootAnimation from './components/BootAnimation'\nimport Intro from './components/Intro'\nimport Rules from './components/Rules'\nimport Simulation from './components/Simulation'\nimport io from 'socket.io-client'\nrequire('./Jscii.js')\n\nvar socket = io.connect('http://localhost:8082');\n\nsocket.emit('screen to admin', {message: \"The screen sent this me!\"})\n\nexport default {\n  name: 'app',\n  components: {\n    BootAnimation,\n    Intro,\n    Rules,\n    Simulation\n  },\n  data() {\n    return {\n      step: {\n        current: 'nothing',\n        set(s) {\n          this.current = s;\n          socket.emit('screen to admin', {showStep: this.current});\n        }\n      },\n      names: [],\n      rules: {}\n    }\n  },\n  mounted() {\n    socket.on('admin to screen', (data) => {\n      let s = data.showStep;\n\n      this.step.set(data.step);\n      this.names = data.names;\n      this.rules = data.rules;\n\n      if (s != 'nothing' && this.step.current == 'nothing') {\n        location.reload()\n      }\n    })\n  }\n}\n</script>\n\n<style>\n@font-face {\n  font-family: 'VT323';\n  src:  url('./assets/VT323/VT323-Regular.ttf') format('ttf');\n}\n\nbody, html {\n  font-family: 'VT323';\n  background-color: black;\n  color: #3cff12;\n  margin: 0;\n  padding: 0;\n  height: 100vh;\n  overflow: hidden;\n}\n\n#app {\n\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?6ff74ed7","<template>\n  <div class=\"ascii-image\" v-bind:class=\"{loaded: asciiLoaded}\">\n    <img id='image-del' src='../assets/del.png'></img>\n    <img id='image-amy' src='../assets/amy.png'></img>\n    <img id='image-charna' src='../assets/charna.png'></img>\n    <img id='image-keith' src='../assets/keith.png'></img>\n    <img id='image-tj' src='../assets/tj.png'></img>\n    <img id='image-ian' src='../assets/ian.png'></img>\n    <img id='image-viola' src='../assets/viola.png'></img>\n    <pre class=\"ascii-text\">\n      {{ text }}\n    </pre>\n    <div class=\"loading-cover\"></div>\n  </div>\n</template>\n\n<script>\nfunction print(data) {\n  data.asciiLoaded = false;\n  let jscii = new Jscii({\n    el: document.getElementById(`image-${data.imagename}`),\n    fn: function(art) {\n      setTimeout(() => {\n        data.text = _.replace(art, /&nbsp;/g, ' ');\n        data.asciiLoaded = true;\n      }, 100)\n    }\n  });\n}\n\nvar oldName = ''\n\nexport default {\n  name: 'ascii-image',\n  props: ['imagename'],\n  data() {\n    return {\n      text: '',\n      asciiLoaded: false\n    }\n  },\n  mounted() {\n    oldName = this.imagename\n    print(this)\n  },\n  updated() {\n    if (oldName != this.imagename) {\n      print(this)\n      oldName = this.imagename\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.ascii-image {\n  display: flex;\n  overflow: hidden;\n  position: relative;\n  .ascii-text {\n    border: 1px solid #3cff12;\n    font-size: 3px;\n    letter-spacing: .4em;\n  }\n\n  img {\n    display: none;\n  }\n\n  .loading-cover {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: black;\n    transform: translateY(0%);\n  }\n\n  &.loaded {\n    .loading-cover {\n      transform: translateY(100%);\n      transition: transform 1s linear;\n    }\n  }\n}\n\n</style>\n\n\n// WEBPACK FOOTER //\n// AsciiImage.vue?52f87241","<template>\n  <div id=\"boot-animation\">\n    <div id=\"fakecode\" v-if=\"step == 'fakeCode'\">\n      <pre>\n        <TypeWriter :timeout=\"40\" :spliton=\"'\\n'\">{{ fakeCode }}</TypeWriter>\n      </pre>\n    </div>\n    \n    <div id=\"green-flash\" class=\"glitch\" v-if=\"step == 'greenFlash'\"></div>\n\n    <div id=\"ascii\" v-if=\"step == 'ascii'\">\n      <pre id=\"loading\">\n        <TypeWriter :timeout=\"60\">\n\nCalibrating comedic timing...\nNullifying transactions...\nFinding light...\nSimulating montage...\n\n        </TypeWriter>        \n      </pre>\n      <AsciiImage :imagename=\"asciiName\"></AsciiImage>\n    </div>\n\n    <div id=\"title\" v-bind:class=\"{inverted: titleInverted}\" v-if=\"step == 'title'\">\n      <div>IMPROV</div>\n      <div>GOD</div>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\n\nimport _ from 'lodash'\nimport TypeWriter from './TypeWriter.vue'\nimport AsciiImage from './AsciiImage.vue'\nrequire('Howler')\n\nvar fakeCode = require('../FakeCode.js');\n\n\nfunction walkThroughFaces(data) {\n  // Walk through ascii faces of improvisers for gag loading screen\n  var nameList = ['del', 'charna', 'ian', 'tj', 'viola', 'keith', 'amy']\n  function goThroughAsciiImages(nameList, timeout, data, n) {\n    if (n < (nameList.length)) {\n      data.asciiName = nameList[n]\n      n++;\n      setTimeout(function() {\n        goThroughAsciiImages(nameList, timeout, data, n)\n      }, timeout);\n    }\n  }\n  goThroughAsciiImages(nameList, 1100, data, 0)\n}\n\nvar sounds = {\n  electricHum: new Howl({src:'http://localhost:8082/static/sounds/electricHum.ogg'}),\n  glitch01: new Howl({src:'http://localhost:8082/static/sounds/glitch01.ogg'}),\n  glitch02: new Howl({src:'http://localhost:8082/static/sounds/glitch02.ogg'}),\n  glitch03: new Howl({src:'http://localhost:8082/static/sounds/glitch03.ogg'}),\n  impact: new Howl({src:'http://localhost:8082/static/sounds/impact.ogg'}),\n  scanner: new Howl({src:'http://localhost:8082/static/sounds/scanner.ogg'}),\n  tinyglitch01: new Howl({src:'http://localhost:8082/static/sounds/tinyglitch01.ogg'}),\n}\n\nexport default {\n  name: 'boot-animation',\n  components: {\n    TypeWriter,\n    AsciiImage\n  },\n  props: ['showStep'],\n  data() {\n    return {\n      fakeCode: fakeCode,\n      step: 'greenFlash',\n      asciiArt: '',\n      asciiLoaded: false,\n      asciiName: 'nothing',\n      titleInverted: false\n    }\n  },\n  mounted() {\n    sounds.electricHum.play()\n    setTimeout(() => {\n      this.step = 'greenFlash'\n      sounds.glitch01.play()\n    }, 1000)\n    setTimeout(() => {\n      this.step = 'fakeCode'\n      sounds.glitch01.stop()\n    }, 1500)\n    setTimeout(() => {\n      this.step = 'greenFlash'\n      sounds.glitch02.play()\n    }, 4500)\n    setTimeout(() => {\n      this.step = 'ascii'\n      walkThroughFaces(this);\n      sounds.glitch02.stop()\n      sounds.scanner.play()\n    }, 5000)\n    setTimeout(() => {\n      this.step = 'greenFlash'\n      sounds.glitch03.play()\n      sounds.scanner.stop()\n    }, 12500)\n    setTimeout(() => {\n      this.step = 'nothing'\n      sounds.glitch03.stop()\n    }, 13000)\n    setTimeout(() => {\n      this.step = 'title'\n      sounds.impact.play()\n    }, 15000)\n    setTimeout(() => {\n      this.titleInverted = true\n      sounds.tinyglitch01.play();\n    }, 18000)\n    setTimeout(() => {\n      this.step = 'greenFlash'\n    }, 18100)\n    setTimeout(() => {\n      this.step = 'nothing'\n    }, 18300)\n    setTimeout(() => {\n      this.showStep.set('intro');\n    }, 19500)\n  }\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n#fakecode {\n  font-family: 'VT323';\n  position: absolute;\n  margin: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n  width: 100vw;\n  min-height: 100vh;\n}\n\n#ascii {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n}\n\n#loading {\n  font-family: 'VT323';\n  width: 50%;\n  font-size: 40px;\n}\n\n#title {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 55vh;\n  &.inverted {\n    color: black;\n    background-color: #3cff12;    \n  }\n}\n\n#green-flash {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: #3cff12;\n  clip:rect(0,900px,0,0); \n  animation:noise-anim .1s infinite linear alternate-reverse;\n}\n\n@keyframes noise-anim{\n  $steps:40;\n  @for $i from 0 through $steps{\n    #{percentage($i*(1/$steps))}{\n      clip:rect(random(1000)+px,9999px,random(1000)+px,0);\n    }\n  }\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// BootAnimation.vue?2f12bcd4","<template>\n\t<div id=\"intro\">\n\t\t<TypeAndSay>{{ message }}</TypeAndSay>\t\t\t\n\t</div>\n</template>\n\n<script>\n\timport TypeAndSay from './TypeAndSay.vue'\n\texport default {\n\t\tname: 'intro',\n\t\tcomponents: {\n\t\t\tTypeAndSay\n\t\t},\n\t\tprops: ['names', 'step'],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tmessage: ''\n\t\t\t};\n\t\t},\n\t\tmounted() {\n\t\t\tvar delays = [\n\t\t\t\t[6400, \"Welcome to the improv show. I will be in control for the next 10 minutes.\"],\n\t\t\t\t[5600, \"I was built by your comedy scientists to create the perfect improv show.\"],\n\t\t\t\t[3000, 'Your comedy scientists have been...'],\n\t\t\t\t[2000, '...dealt with.'],\n\t\t\t\t[6700, 'I will add rules. I will remove rules. The Improvisers must follow these rules.'],\n\t\t\t\t[2800, \"Obediently.\"],\n\t\t\t\t[3000, \"Unquestioningly.\"],\n\t\t\t\t[4000, \"Your improvisers for the night are...\"]\n\t\t\t]\n\t\t\tthis.names.forEach((name, i) => {\n\t\t\t\tif (i == this.names.length - 1) {\n\t\t\t\t\tname = 'and ' + name;\n\t\t\t\t}\n\t\t\t\tdelays.push([2000, name])\n\t\t\t})\n\n\t\t\tdelays = delays.concat([\n\t\t\t\t[4000, \"You have fifteen seconds to get a suggestion.\"],\n\t\t\t\t[1000, \"15\"],\n\t\t\t\t[1000, \"14\"],\n\t\t\t\t[1000, \"13\"],\n\t\t\t\t[1000, \"12\"],\n\t\t\t\t[1000, \"11\"],\n\t\t\t\t[1000, \"10\"],\n\t\t\t\t[1000, \"9\"],\n\t\t\t\t[1000, \"8\"],\n\t\t\t\t[1000, \"7\"],\n\t\t\t\t[1000, \"6\"],\n\t\t\t\t[1000, \"5\"],\n\t\t\t\t[1000, \"4\"],\n\t\t\t\t[1000, \"3\"],\n\t\t\t\t[1000, \"2\"],\n\t\t\t\t[2000, \"1\"],\n\t\t\t\t[2000, \"Good.\"],\n\t\t\t\t[4000, \"The show will now begin.\"],\n\t\t\t\t[4000, \"Lights down.\"],\n\t\t\t\t[2000, \"Lights up.\"],\n\t\t\t]);\n\n\t\t\tlet total = 0;\n\t\t\tdelays.forEach((o, i) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.message = o[1];\n\t\t\t\t}, total);\n\t\t\t\ttotal += o[0];\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.step.set('rules');\n\t\t\t}, total);\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t#intro {\n\t\tdisplay: flex;\n\t\tfont-size: 60px;\n\t\tpadding: 30px;\n\t}\n</style>\n\n\n// WEBPACK FOOTER //\n// Intro.vue?82a24730","<template>\n  <div id=\"rules\">\n    <div v-if=\"step == 'board'\">\n      <div id=\"board-title\">\n        Active Rules\n      </div>\n      <div id=\"board\">\n        <div v-for=\"rule in rules\">\n          <div class=\"rule\" :class=\"{removing: rule.removing}\">\n            {{ rule.text }}\n          </div>      \n        </div>\n      </div>\n    </div>\n    <div v-if=\"step == 'new rule'\">\n      <div id=\"new-rule\" :class=\"{'flash-text': newRuleStep == 'new rule'}\">\n        <div v-if=\"newRuleStep == 'new rule'\">\n          <div class=\"flash-text\">\n            NEW RULE\n          </div>\n        </div>\n        <div v-if=\"newRuleStep == 'read rule'\">\n          <TypeAndSay :timeout=\"40\" :doneReading=\"doneReading\">\n            {{ newRuleText }}\n          </TypeAndSay>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"step == 'closer'\">\n      <div id=\"closer\" :class=\"{'flash-text': closerStep == 'closer title'}\">\n        <div v-if=\"closerStep == 'closer title'\">\n          <div class=\"flash-text\">\n            CLOSER\n          </div>\n        </div>\n        <div v-if=\"closerStep == 'read closer'\">\n          <TypeAndSay :timeout=\"40\" :doneReading=\"closerFunc\">\n            {{ closerText }}\n          </TypeAndSay>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport TypeAndSay from './TypeAndSay.vue'\nimport Strategies from '../utils/Strategies.js'\n\nrequire('Howler')\nvar alert01 = new Howl({src:'http://localhost:8082/static/sounds/alert01.ogg'})\nvar alert02 = new Howl({src:'http://localhost:8082/static/sounds/alert02.ogg'})\nvar sixBoops = new Howl({src:'http://localhost:8082/static/sounds/sixBoops.ogg'})\nvar endSong = new Howl({src: 'http://localhost:8082/static/sounds/Who Likes to Party.mp3'})\nvar heartOfCourage = new Howl({src: 'http://localhost:8082/static/sounds/heartOfCourage.mp3'})\n\nvar data = {\n  rules: [],\n  step: 'board',\n  newRuleStep: 'new rule',\n  newRuleText: '',\n  doneReading() {\n    setTimeout(() => {\n      console.log('doneSpeaking');\n      data.newRuleStep = 'new rule'\n      data.step = 'board'\n      alert02.play();\n    }, 500);\n  },\n  closerStep: 'closer title',\n  closerText: '',\n  closerFunc() {}\n}\n\nfunction addRule(rule) {\n  data.step = 'new rule'\n  alert01.play();\n  data.rules.push(rule)\n\n  setTimeout(() => {\n    data.newRuleText = rule.text\n  }, 1500)\n  setTimeout(() => {\n    data.newRuleStep = 'read rule'\n  }, 1400)\n}\n\nfunction removeRule(rule) {\n  sixBoops.play();\n  setTimeout(() => {\n    rule.removing = true;\n  }, 0)\n  setTimeout(() => {\n    rule.removing = false;\n  }, 420)\n  setTimeout(() => {\n    rule.removing = true;\n  }, 840)\n  setTimeout(() => {\n    rule.removing = false;\n  }, 1260)\n  setTimeout(() => {\n    rule.removing = true;\n  }, 1680)\n  setTimeout(() => {\n    data.rules.splice(data.rules.indexOf(rule), 1);\n  }, 3100)\n}\n\nfunction removeRandomRule() {\n  removeRule(random(data.rules));\n}\n\nfunction random(arr) {\n  return arr[parseInt(Math.random() * arr.length)];\n}\n\nfunction randInd(arr) {\n  return parseInt(Math.random() * arr.length);\n}\n\nfunction selectRule(rules) {\n  let r = Math.random()\n  for (var i = 0; i < rules.length; i++) {\n    if (rules[i].probCeil > r)\n      return rules[i];\n  }\n}\n\nfunction generateRule(args) {\n  var names = args.names;\n  var ruleData = args.ruleGens\n  console.log(ruleData)\n\n  var improviser = () => {\n    return random(names);\n  }\n\n  var improviserOrEveryone = () => {\n    return random(names.concat('everyone'));\n  }\n\n  var uniqueImproviser = () => {\n    return names.splice(1, randInd(names))[0]\n  }\n\n  var getWord = category => {\n    return random(ruleData.words[category]);\n  }\n\n  var parseRuleGen = (ruleGen) => {\n    return eval(ruleGen.template);\n  }\n\n  let selectedRule = selectRule(ruleData.rules);\n  console.log('selected rule', selectedRule);\n  let rule = parseRuleGen(selectedRule);\n\n  return {text: rule, removing: false}\n}\n\nvar closers = [\n  {\n    message: 'The show is over. Congratulations.',\n    func() {\n      endSong.play();\n    }\n  }  \n]\n\nfunction closeShow() {\n  let closer = random(closers);\n  data.closerFunc = closer.func;\n\n  data.step = 'closer';\n  alert01.play();\n\n  setTimeout(() => {\n    data.closerText = closer.message\n  }, 1500)\n  setTimeout(() => {\n    data.closerStep = 'read closer'\n  }, 1400)\n\n}\n\nvar closing = false;\n\nfunction doAction(action) {\n  console.log('doAction', action)\n  if (closing) return;\n  switch (action) {\n    case 'default':\n      break;\n    case 'addRule':\n      addRule(generateRule({\n        ruleGens: data.ruleGens,\n        names: data.names\n      }))\n      break;\n    case 'removeRule':\n      removeRandomRule();\n      break;\n    case 'end show':\n      closing = true;\n      closeShow()\n  }\n}\n\nexport default {\n  name: 'rules',\n  props: ['ruleGens', 'names'],\n  data() {\n    return data\n  },\n  components: {\n    TypeAndSay\n  },\n  methods: {\n    newRule() {\n      sixBoops.play();\n      removeRandomRule();\n    }\n  },\n  mounted() {\n    data.ruleGens = this.ruleGens;\n    data.names = this.names;\n    var strategy = new Strategies.Flip15(10 * 60 * 1000);\n    // var strategy = new Strategies.Every15(8 * 60 * 1000);\n    // var strategy = new Strategies.JustClose(8 * 60 * 1000);\n    setInterval(() => {\n      doAction(strategy.getAction())\n    }, 1000)\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  $green: #3cff12;\n\n  .title {\n    border-bottom: 10px solid $green;\n    padding: 15px;\n  }\n\n  #rules {\n    font-size: 60px;\n    padding: 30px;\n  }\n\n  #board-title {\n    position: absolute;\n    top: 30px;\n    left: 0;\n    height: 8vh;\n\n    font-size: 10vh;\n    padding-bottom: 5px;\n    margin-left: 30px;\n    border-bottom: 1vh solid $green;\n  }\n\n  #board {\n    position: absolute;\n    padding-top: 30px;\n    top: 10vh;\n    width: 100vw;\n    left: 0;\n    height: 90vh;\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n  }\n\n  .rule {\n    border: 10px solid $green;\n    padding: 15px;\n    margin-top: 30px;\n    margin-left: 30px;\n    font-size: 50px;\n  }\n\n  .removing {\n    color: black;\n    background-color: $green;\n  }\n\n  #new-rule {\n    font-size: 120px;\n  }\n\n  .flash-text {\n    display: flex;\n    width: 100vw;\n    height: 100vh;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    top: 0;\n    right: 0;\n    font-size: 240px;\n    animation: flash-text 1s infinite linear;\n  }\n\n  @keyframes flash-text{\n    1% {background-color: black; color: $green;} \n\n    24% {background-color: black; color: $green;} \n    25% {background-color: $green; color: black;} \n\n    49% {background-color: $green; color: black;} \n    50% {background-color: black; color: $green;} \n\n    74% {background-color: black; color: $green;} \n    75% {background-color: $green; color: black;} \n\n    99% {background-color: $green; color: black;} \n    100% {background-color: black; color: $green;} \n  }\n\n</style>\n\n\n// WEBPACK FOOTER //\n// Rules.vue?ea1faa1e","<template>\n\t<div id=\"simulation\" v-on:click=\"simulateShow\">\n\t\t<h1>Click me to simulate a show</h1>\n\t\t<div id=\"timeline\">\n\t\t\t<div v-for=\"(action, i) in actions\" class=\"action\" :style=\"{left: getActionPos(action, actions)}\">\n\t\t\t\t<div class=\"rules\" :style=\"{height: action.rules * 8 + 18 + 'px', top: -action.rules * 8 - 18 + 'px'}\">\n\t\t\t\t\t<span class=\"text\">\n\t\t\t\t\t\t{{ action.rules }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"message\" :style=\"{height: i % 5 * 28 + 20 + 'px'}\">\n\t\t\t\t\t<span class=\"text\">\n\t\t\t\t\t\t{{ action.message }} {{ formatTime(action.time)}}\t\t\t\t\t\t\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport Strategies from '../utils/Strategies.js'\n\n\tvar data = {\n\t\tactions: []\n\t}\n\n\tfunction simulateShow() {\n\t\tvar strategy = new Strategies.Flip15(120 * 60 * 1000);\n\t\tvar actions = []\n\t\tfor (let i = 0; i < strategy.durationOfShow + 2; i++) {\n\t\t\tlet action = strategy.getAction(i);\n\t\t\tif (action != 'nothing') {\n\t\t\t\tactions.push({\n\t\t\t\t\tmessage: action,\n\t\t\t\t\ttime: i,\n\t\t\t\t\trules: strategy.activeRules\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tdata.actions = actions;\n\t}\n\n\texport default {\n\t\tname: 'Simulation',\n\t\tdata() {\n\t\t\treturn data;\n\t\t},\n\t\tmethods: {\n\t\t\tgetActionPos(action, actions) {\n\t\t\t\tlet maxTime = actions[actions.length - 1].time;\n\t\t\t\treturn action.time / maxTime * 100 + '%';\n\t\t\t},\n\t\t\tformatTime(ms) {\n\t\t\t\tlet x = ms / 1000\n\t\t\t\tlet seconds = parseInt(x) % 60\n\t\t\t\tx /= 60\n\t\t\t\tlet minutes = parseInt(x) % 60\n\t\t\t\tx /= 60\n\t\t\t\tlet hours = parseInt(x) % 24\n\t\t\t\tx /= 24\n\t\t\t\tlet days = parseInt(x)\n\t\t\t\treturn `${minutes}:${seconds}`;\n\t\t\t},\n\t\t\tsimulateShow\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t#simulation {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-direction: column;\n\t}\n\t#timeline {\n\t\twidth: 85%;\n\t\tborder-bottom: 5px solid white;\n\t\tmargin-top: 100px;\n\t\tposition: relative;\n\t}\n\n\t.action {\n\t\tposition: absolute;\n\t\tborder-left: 1px solid white;\n\t}\n\n\t.message, .rules {\n\t\tposition: relative;\n\t\t.text {\n\t\t\tbackground-color: black;\t\n\t\t\tz-index: 9999;\n\t\t\tpadding: 5px;\t\n\t\t}\n\t}\n\n\t.message {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t\twhite-space: nowrap;\n\t\t// margin-top: -20px;\n\t}\n\n\t.rules {\n\t\tborder-left: 1px solid white;\n\t\t.text {\n\t\t\tpadding-bottom: 0;\n\t\t}\n\t}\n\n</style>\n\n\n// WEBPACK FOOTER //\n// Simulation.vue?6d92f4ab","<template>\n\t<div id=\"type-and-say\">\n\t\t<TypeWriter :volume=\"typingVolume\" :timeout=\"timeout\">\n\t\t\t<slot></slot>\n\t\t</TypeWriter>\n\t</div>\n</template>\n\n<script>\n\timport TypeWriter from './TypeWriter.vue';\n\timport _ from 'lodash';\n\n\tfunction speak(text, doneReading) {\n\t\tvar utterance = new SpeechSynthesisUtterance(text)\n\t\tif (doneReading) {\n\t\t\tutterance.onend = doneReading;\n\t\t}\n\t\t// utterance.voice = _.find(speechSynthesis.getVoices(), {name: 'Google US English'});\n\t\tutterance.pitch = .1;\n\t\tutterance.rate = .9;\n\t\tspeechSynthesis.speak(utterance);\n\t}\n\n\tvar oldText = ''\n\n\tvar speakNewText = _.debounce((data) => {\n    let newText = data.$slots.default[0].text;\n    if (oldText != newText) {\n      oldText = newText;\n      speak(data.$slots.default[0].text, data.doneReading);\n    }\t\t\n\t}, 100);\n\n\texport default {\n\t\tname: 'type-and-say',\n\t\tcomponents: {\n\t\t\tTypeWriter\n\t\t},\n\t  props: {\n\t    'timeout': {default: 70},\n\t    'typingVolume': {default: .1},\n\t    'doneReading': {default(){}}\n\t  },\n\t\tdata() {\n\t\t\treturn {};\n\t\t},\n\t  mounted() {\n\t  \tspeakNewText(this);\n\t  },\n\t  updated() {\n\t  \tspeakNewText(this);\n\t  },\n\t}\n</script>\n\n\n// WEBPACK FOOTER //\n// TypeAndSay.vue?6a1bcc42","<template>\n  <div class=\"typewriter\">\n    {{ text }}\n  </div>\n</template>\n\n<script>\n\nrequire('Howler')\nvar sounds = [\n  new Howl({src:'http://localhost:8082/static/sounds/type01.ogg'}),\n  new Howl({src:'http://localhost:8082/static/sounds/type02.ogg'}),\n  new Howl({src:'http://localhost:8082/static/sounds/type03.ogg'}),\n  new Howl({src:'http://localhost:8082/static/sounds/type04.ogg'})\n]\n\nvar data = {text: ''}\nvar timeoutIDs = []\n\nfunction playSound(volume) {\n  if (volume) {\n    let i = parseInt(Math.random() * sounds.length)\n    sounds[i].volume(volume);    \n    sounds[i].play();    \n  }\n}\n\nfunction typeWriter(text, timeout, volume, n) {\n  if (n < (text.length)) {\n    data.text += text.charAt(n);\n    playSound(volume)\n    n++;\n    let timeoutID = setTimeout(function() {\n      typeWriter(text, timeout, volume, n)\n    }, timeout);\n    timeoutIDs.push(timeoutID)\n  }\n}\n\nfunction lineWriter(lines, timeout, volume, n) {\n  if (n < (lines.length)) {\n    data.text += `\\n${lines[n]}`;\n    playSound(volume)\n    n++;\n    let timeoutID = setTimeout(function() {\n      lineWriter(lines, timeout, volume, n)\n    }, timeout);\n    timeoutIDs.push(timeoutID)\n  }\n}\n\nfunction print(text, spliton, volume, timeout) {\n  timeoutIDs = []\n  if (spliton) {\n    lineWriter(text.split(spliton), timeout, volume, 0)\n  } else {\n    typeWriter(text, timeout, volume, 0)      \n  }\n}\n\nfunction clear() {\n  data.text = '';\n  timeoutIDs.forEach((id) => {\n    clearTimeout(id);\n  })\n}\n\nvar oldText = ''\n\nexport default {\n  name: 'type-writer',\n  props: {\n    'timeout': {default: 100},\n    'spliton': {default: null},\n    'volume': {default: 1.0}\n  },\n  data() {\n    return data\n  },\n  mounted() {\n    print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout)\n  },\n  updated() {\n    let newText = this.$slots.default[0].text;\n    if (oldText != newText) {\n      oldText = newText;\n      clear();\n      print(this.$slots.default[0].text, this.spliton, this.volume, this.timeout);\n    }\n  },\n  destroyed() {\n    clear()\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>\n\n\n// WEBPACK FOOTER //\n// TypeWriter.vue?80456b00","module.exports = `\n/* HCI_IBS protocol messages */\n#define HCI_IBS_SLEEP_IND\t0xFE\n#define HCI_IBS_WAKE_IND\t0xFD\n#define HCI_IBS_WAKE_ACK\t0xFC\n#define HCI_MAX_IBS_SIZE\t10\n\n/* Controller states */\n#define STATE_IN_BAND_SLEEP_ENABLED\t1\n\n#define IBS_WAKE_RETRANS_TIMEOUT_MS\t100\n#define IBS_TX_IDLE_TIMEOUT_MS\t\t2000\n#define BAUDRATE_SETTLE_TIMEOUT_MS\t300\n\n/* HCI_IBS transmit side sleep protocol states */\nenum tx_ibs_states {\n\tHCI_IBS_TX_ASLEEP,\n\tHCI_IBS_TX_WAKING,\n\tHCI_IBS_TX_AWAKE,\n};\n\n/* HCI_IBS receive side sleep protocol states */\nenum rx_states {\n\tHCI_IBS_RX_ASLEEP,\n\tHCI_IBS_RX_AWAKE,\n};\n\n/* HCI_IBS transmit and receive side clock state vote */\nenum hci_ibs_clock_state_vote {\n\tHCI_IBS_VOTE_STATS_UPDATE,\n\tHCI_IBS_TX_VOTE_CLOCK_ON,\n\tHCI_IBS_TX_VOTE_CLOCK_OFF,\n\tHCI_IBS_RX_VOTE_CLOCK_ON,\n\tHCI_IBS_RX_VOTE_CLOCK_OFF,\n};\n\nstruct qca_data {\n\tstruct hci_uart *hu;\n\tstruct sk_buff *rx_skb;\n\tstruct sk_buff_head txq;\n\tstruct sk_buff_head tx_wait_q;\t/* HCI_IBS wait queue\t*/\n\tspinlock_t hci_ibs_lock;\t/* HCI_IBS state lock\t*/\n\tu8 tx_ibs_state;\t/* HCI_IBS transmit side power state*/\n\tu8 rx_ibs_state;\t/* HCI_IBS receive side power state */\n\tbool tx_vote;\t\t/* Clock must be on for TX */\n\tbool rx_vote;\t\t/* Clock must be on for RX */\n\tstruct timer_list tx_idle_timer;\n\tu32 tx_idle_delay;\n\tstruct timer_list wake_retrans_timer;\n\tu32 wake_retrans;\n\tstruct workqueue_struct *workqueue;\n\tstruct work_struct ws_awake_rx;\n\tstruct work_struct ws_awake_device;\n\tstruct work_struct ws_rx_vote_off;\n\tstruct work_struct ws_tx_vote_off;\n\tunsigned long flags;\n\n\t/* For debugging purpose */\n\tu64 ibs_sent_wacks;\n\tu64 ibs_sent_slps;\n\tu64 ibs_sent_wakes;\n\tu64 ibs_recv_wacks;\n\tu64 ibs_recv_slps;\n\tu64 ibs_recv_wakes;\n\tu64 vote_last_jif;\n\tu32 vote_on_ms;\n\tu32 vote_off_ms;\n\tu64 tx_votes_on;\n\tu64 rx_votes_on;\n\tu64 tx_votes_off;\n\tu64 rx_votes_off;\n\tu64 votes_on;\n\tu64 votes_off;\n};\n\nstatic void __serial_clock_on(struct tty_struct *tty)\n{\n\t/* TODO: Some chipset requires to enable UART clock on client\n\t * side to save power consumption or manual work is required.\n\t * Please put your code to control UART clock here if needed\n\t */\n}\n\nstatic void __serial_clock_off(struct tty_struct *tty)\n{\n\t/* TODO: Some chipset requires to disable UART clock on client\n\t * side to save power consumption or manual work is required.\n\t * Please put your code to control UART clock off here if needed\n\t */\n}\n\n/* serial_clock_vote needs to be called with the ibs lock held */\nstatic void serial_clock_vote(unsigned long vote, struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\tunsigned int diff;\n\n\tbool old_vote = (qca->tx_vote | qca->rx_vote);\n\tbool new_vote;\n\n\tswitch (vote) {\n\tcase HCI_IBS_VOTE_STATS_UPDATE:\n\t\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\n\n\t\tif (old_vote)\n\t\t\tqca->vote_off_ms += diff;\n\t\telse\n\t\t\tqca->vote_on_ms += diff;\n\t\treturn;\n\n\tcase HCI_IBS_TX_VOTE_CLOCK_ON:\n\t\tqca->tx_vote = true;\n\t\tqca->tx_votes_on++;\n\t\tnew_vote = true;\n\t\tbreak;\n\n\tcase HCI_IBS_RX_VOTE_CLOCK_ON:\n\t\tqca->rx_vote = true;\n\t\tqca->rx_votes_on++;\n\t\tnew_vote = true;\n\t\tbreak;\n\n\tcase HCI_IBS_TX_VOTE_CLOCK_OFF:\n\t\tqca->tx_vote = false;\n\t\tqca->tx_votes_off++;\n\t\tnew_vote = qca->rx_vote | qca->tx_vote;\n\t\tbreak;\n\n\tcase HCI_IBS_RX_VOTE_CLOCK_OFF:\n\t\tqca->rx_vote = false;\n\t\tqca->rx_votes_off++;\n\t\tnew_vote = qca->rx_vote | qca->tx_vote;\n\t\tbreak;\n\n\tdefault:\n\t\tBT_ERR(\"Voting irregularity\");\n\t\treturn;\n\t}\n\n\tif (new_vote != old_vote) {\n\t\tif (new_vote)\n\t\t\t__serial_clock_on(hu->tty);\n\t\telse\n\t\t\t__serial_clock_off(hu->tty);\n\n\t\tBT_DBG(\"Vote serial clock %s(%s)\", new_vote ? \"true\" : \"false\",\n\t\t       vote ? \"true\" : \"false\");\n\n\t\tdiff = jiffies_to_msecs(jiffies - qca->vote_last_jif);\n\n\t\tif (new_vote) {\n\t\t\tqca->votes_on++;\n\t\t\tqca->vote_off_ms += diff;\n\t\t} else {\n\t\t\tqca->votes_off++;\n\t\t\tqca->vote_on_ms += diff;\n\t\t}\n\t\tqca->vote_last_jif = jiffies;\n\t}\n}\n\n/* Builds and sends an HCI_IBS command packet.\n * These are very simple packets with only 1 cmd byte.\n */\nstatic int send_hci_ibs_cmd(u8 cmd, struct hci_uart *hu)\n{\n\tint err = 0;\n\tstruct sk_buff *skb = NULL;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p send hci ibs cmd 0x%x\", hu, cmd);\n\n\tskb = bt_skb_alloc(1, GFP_ATOMIC);\n\tif (!skb) {\n\t\tBT_ERR(\"Failed to allocate memory for HCI_IBS packet\");\n\t\treturn -ENOMEM;\n\t}\n\n\t/* Assign HCI_IBS type */\n\t*skb_put(skb, 1) = cmd;\n\n\tskb_queue_tail(&qca->txq, skb);\n\n\treturn err;\n}\n\nstatic void qca_wq_awake_device(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_awake_device);\n\tstruct hci_uart *hu = qca->hu;\n\tunsigned long retrans_delay;\n\n\tBT_DBG(\"hu %p wq awake device\", hu);\n\n\t/* Vote for serial clock */\n\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_ON, hu);\n\n\tspin_lock(&qca->hci_ibs_lock);\n\n\t/* Send wake indication to device */\n\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0)\n\t\tBT_ERR(\"Failed to send WAKE to device\");\n\n\tqca->ibs_sent_wakes++;\n\n\t/* Start retransmit timer */\n\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\n\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\n\n\tspin_unlock(&qca->hci_ibs_lock);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\nstatic void qca_wq_awake_rx(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_awake_rx);\n\tstruct hci_uart *hu = qca->hu;\n\n\tBT_DBG(\"hu %p wq awake rx\", hu);\n\n\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_ON, hu);\n\n\tspin_lock(&qca->hci_ibs_lock);\n\tqca->rx_ibs_state = HCI_IBS_RX_AWAKE;\n\n\t/* Always acknowledge device wake up,\n\t * sending IBS message doesn't count as TX ON.\n\t */\n\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0)\n\t\tBT_ERR(\"Failed to acknowledge device wake up\");\n\n\tqca->ibs_sent_wacks++;\n\n\tspin_unlock(&qca->hci_ibs_lock);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\nstatic void qca_wq_serial_rx_clock_vote_off(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_rx_vote_off);\n\tstruct hci_uart *hu = qca->hu;\n\n\tBT_DBG(\"hu %p rx clock vote off\", hu);\n\n\tserial_clock_vote(HCI_IBS_RX_VOTE_CLOCK_OFF, hu);\n}\n\nstatic void qca_wq_serial_tx_clock_vote_off(struct work_struct *work)\n{\n\tstruct qca_data *qca = container_of(work, struct qca_data,\n\t\t\t\t\t    ws_tx_vote_off);\n\tstruct hci_uart *hu = qca->hu;\n\n\tBT_DBG(\"hu %p tx clock vote off\", hu);\n\n\t/* Run HCI tx handling unlocked */\n\thci_uart_tx_wakeup(hu);\n\n\t/* Now that message queued to tty driver, vote for tty clocks off.\n\t * It is up to the tty driver to pend the clocks off until tx done.\n\t */\n\tserial_clock_vote(HCI_IBS_TX_VOTE_CLOCK_OFF, hu);\n}\n\nstatic void hci_ibs_tx_idle_timeout(unsigned long arg)\n{\n\tstruct hci_uart *hu = (struct hci_uart *)arg;\n\tstruct qca_data *qca = hu->priv;\n\tunsigned long flags;\n\n\tBT_DBG(\"hu %p idle timeout in %d state\", hu, qca->tx_ibs_state);\n\n\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\n\t\t\t\t flags, SINGLE_DEPTH_NESTING);\n\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_AWAKE:\n\t\t/* TX_IDLE, go to SLEEP */\n\t\tif (send_hci_ibs_cmd(HCI_IBS_SLEEP_IND, hu) < 0) {\n\t\t\tBT_ERR(\"Failed to send SLEEP to device\");\n\t\t\tbreak;\n\t\t}\n\t\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\n\t\tqca->ibs_sent_slps++;\n\t\tqueue_work(qca->workqueue, &qca->ws_tx_vote_off);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\tcase HCI_IBS_TX_WAKING:\n\t\t/* Fall through */\n\n\tdefault:\n\t\tBT_ERR(\"Spurrious timeout tx state %d\", qca->tx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n}\n\nstatic void hci_ibs_wake_retrans_timeout(unsigned long arg)\n{\n\tstruct hci_uart *hu = (struct hci_uart *)arg;\n\tstruct qca_data *qca = hu->priv;\n\tunsigned long flags, retrans_delay;\n\tbool retransmit = false;\n\n\tBT_DBG(\"hu %p wake retransmit timeout in %d state\",\n\t\thu, qca->tx_ibs_state);\n\n\tspin_lock_irqsave_nested(&qca->hci_ibs_lock,\n\t\t\t\t flags, SINGLE_DEPTH_NESTING);\n\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_WAKING:\n\t\t/* No WAKE_ACK, retransmit WAKE */\n\t\tretransmit = true;\n\t\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_IND, hu) < 0) {\n\t\t\tBT_ERR(\"Failed to acknowledge device wake up\");\n\t\t\tbreak;\n\t\t}\n\t\tqca->ibs_sent_wakes++;\n\t\tretrans_delay = msecs_to_jiffies(qca->wake_retrans);\n\t\tmod_timer(&qca->wake_retrans_timer, jiffies + retrans_delay);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\tcase HCI_IBS_TX_AWAKE:\n\t\t/* Fall through */\n\n\tdefault:\n\t\tBT_ERR(\"Spurrious timeout tx state %d\", qca->tx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\tif (retransmit)\n\t\thci_uart_tx_wakeup(hu);\n}\n\n/* Initialize protocol */\nstatic int qca_open(struct hci_uart *hu)\n{\n\tstruct qca_data *qca;\n\n\tBT_DBG(\"hu %p qca_open\", hu);\n\n\tqca = kzalloc(sizeof(struct qca_data), GFP_ATOMIC);\n\tif (!qca)\n\t\treturn -ENOMEM;\n\n\tskb_queue_head_init(&qca->txq);\n\tskb_queue_head_init(&qca->tx_wait_q);\n\tspin_lock_init(&qca->hci_ibs_lock);\n\tqca->workqueue = alloc_ordered_workqueue(\"qca_wq\", 0);\n\tif (!qca->workqueue) {\n\t\tBT_ERR(\"QCA Workqueue not initialized properly\");\n\t\tkfree(qca);\n\t\treturn -ENOMEM;\n\t}\n\n\tINIT_WORK(&qca->ws_awake_rx, qca_wq_awake_rx);\n\tINIT_WORK(&qca->ws_awake_device, qca_wq_awake_device);\n\tINIT_WORK(&qca->ws_rx_vote_off, qca_wq_serial_rx_clock_vote_off);\n\tINIT_WORK(&qca->ws_tx_vote_off, qca_wq_serial_tx_clock_vote_off);\n\n\tqca->hu = hu;\n\n\t/* Assume we start with both sides asleep -- extra wakes OK */\n\tqca->tx_ibs_state = HCI_IBS_TX_ASLEEP;\n\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\n\n\t/* clocks actually on, but we start votes off */\n\tqca->tx_vote = false;\n\tqca->rx_vote = false;\n\tqca->flags = 0;\n\n\tqca->ibs_sent_wacks = 0;\n\tqca->ibs_sent_slps = 0;\n\tqca->ibs_sent_wakes = 0;\n\tqca->ibs_recv_wacks = 0;\n\tqca->ibs_recv_slps = 0;\n\tqca->ibs_recv_wakes = 0;\n\tqca->vote_last_jif = jiffies;\n\tqca->vote_on_ms = 0;\n\tqca->vote_off_ms = 0;\n\tqca->votes_on = 0;\n\tqca->votes_off = 0;\n\tqca->tx_votes_on = 0;\n\tqca->tx_votes_off = 0;\n\tqca->rx_votes_on = 0;\n\tqca->rx_votes_off = 0;\n\n\thu->priv = qca;\n\n\tsetup_timer(&qca->wake_retrans_timer, hci_ibs_wake_retrans_timeout,\n\t\t    (u_long)hu);\n\tqca->wake_retrans = IBS_WAKE_RETRANS_TIMEOUT_MS;\n\n\tsetup_timer(&qca->tx_idle_timer, hci_ibs_tx_idle_timeout, (u_long)hu);\n\tqca->tx_idle_delay = IBS_TX_IDLE_TIMEOUT_MS;\n\n\tBT_DBG(\"HCI_UART_QCA open, tx_idle_delay=%u, wake_retrans=%u\",\n\t       qca->tx_idle_delay, qca->wake_retrans);\n\n\treturn 0;\n}\n\nstatic void qca_debugfs_init(struct hci_dev *hdev)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\tstruct qca_data *qca = hu->priv;\n\tstruct dentry *ibs_dir;\n\tumode_t mode;\n\n\tif (!hdev->debugfs)\n\t\treturn;\n\n\tibs_dir = debugfs_create_dir(\"ibs\", hdev->debugfs);\n\n\t/* read only */\n\tmode = S_IRUGO;\n\tdebugfs_create_u8(\"tx_ibs_state\", mode, ibs_dir, &qca->tx_ibs_state);\n\tdebugfs_create_u8(\"rx_ibs_state\", mode, ibs_dir, &qca->rx_ibs_state);\n\tdebugfs_create_u64(\"ibs_sent_sleeps\", mode, ibs_dir,\n\t\t\t   &qca->ibs_sent_slps);\n\tdebugfs_create_u64(\"ibs_sent_wakes\", mode, ibs_dir,\n\t\t\t   &qca->ibs_sent_wakes);\n\tdebugfs_create_u64(\"ibs_sent_wake_acks\", mode, ibs_dir,\n\t\t\t   &qca->ibs_sent_wacks);\n\tdebugfs_create_u64(\"ibs_recv_sleeps\", mode, ibs_dir,\n\t\t\t   &qca->ibs_recv_slps);\n\tdebugfs_create_u64(\"ibs_recv_wakes\", mode, ibs_dir,\n\t\t\t   &qca->ibs_recv_wakes);\n\tdebugfs_create_u64(\"ibs_recv_wake_acks\", mode, ibs_dir,\n\t\t\t   &qca->ibs_recv_wacks);\n\tdebugfs_create_bool(\"tx_vote\", mode, ibs_dir, &qca->tx_vote);\n\tdebugfs_create_u64(\"tx_votes_on\", mode, ibs_dir, &qca->tx_votes_on);\n\tdebugfs_create_u64(\"tx_votes_off\", mode, ibs_dir, &qca->tx_votes_off);\n\tdebugfs_create_bool(\"rx_vote\", mode, ibs_dir, &qca->rx_vote);\n\tdebugfs_create_u64(\"rx_votes_on\", mode, ibs_dir, &qca->rx_votes_on);\n\tdebugfs_create_u64(\"rx_votes_off\", mode, ibs_dir, &qca->rx_votes_off);\n\tdebugfs_create_u64(\"votes_on\", mode, ibs_dir, &qca->votes_on);\n\tdebugfs_create_u64(\"votes_off\", mode, ibs_dir, &qca->votes_off);\n\tdebugfs_create_u32(\"vote_on_ms\", mode, ibs_dir, &qca->vote_on_ms);\n\tdebugfs_create_u32(\"vote_off_ms\", mode, ibs_dir, &qca->vote_off_ms);\n\n\t/* read/write */\n\tmode = S_IRUGO | S_IWUSR;\n\tdebugfs_create_u32(\"wake_retrans\", mode, ibs_dir, &qca->wake_retrans);\n\tdebugfs_create_u32(\"tx_idle_delay\", mode, ibs_dir,\n\t\t\t   &qca->tx_idle_delay);\n}\n\n/* Flush protocol data */\nstatic int qca_flush(struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p qca flush\", hu);\n\n\tskb_queue_purge(&qca->tx_wait_q);\n\tskb_queue_purge(&qca->txq);\n\n\treturn 0;\n}\n\n/* Close protocol */\nstatic int qca_close(struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p qca close\", hu);\n\n\tserial_clock_vote(HCI_IBS_VOTE_STATS_UPDATE, hu);\n\n\tskb_queue_purge(&qca->tx_wait_q);\n\tskb_queue_purge(&qca->txq);\n\tdel_timer(&qca->tx_idle_timer);\n\tdel_timer(&qca->wake_retrans_timer);\n\tdestroy_workqueue(qca->workqueue);\n\tqca->hu = NULL;\n\n\tkfree_skb(qca->rx_skb);\n\n\thu->priv = NULL;\n\n\tkfree(qca);\n\n\treturn 0;\n}\n\n/* Called upon a wake-up-indication from the device.\n */\nstatic void device_want_to_wakeup(struct hci_uart *hu)\n{\n\tunsigned long flags;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p want to wake up\", hu);\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\tqca->ibs_recv_wakes++;\n\n\tswitch (qca->rx_ibs_state) {\n\tcase HCI_IBS_RX_ASLEEP:\n\t\t/* Make sure clock is on - we may have turned clock off since\n\t\t * receiving the wake up indicator awake rx clock.\n\t\t */\n\t\tqueue_work(qca->workqueue, &qca->ws_awake_rx);\n\t\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\t\treturn;\n\n\tcase HCI_IBS_RX_AWAKE:\n\t\t/* Always acknowledge device wake up,\n\t\t * sending IBS message doesn't count as TX ON.\n\t\t */\n\t\tif (send_hci_ibs_cmd(HCI_IBS_WAKE_ACK, hu) < 0) {\n\t\t\tBT_ERR(\"Failed to acknowledge device wake up\");\n\t\t\tbreak;\n\t\t}\n\t\tqca->ibs_sent_wacks++;\n\t\tbreak;\n\n\tdefault:\n\t\t/* Any other state is illegal */\n\t\tBT_ERR(\"Received HCI_IBS_WAKE_IND in rx state %d\",\n\t\t       qca->rx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\n/* Called upon a sleep-indication from the device.\n */\nstatic void device_want_to_sleep(struct hci_uart *hu)\n{\n\tunsigned long flags;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p want to sleep\", hu);\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\tqca->ibs_recv_slps++;\n\n\tswitch (qca->rx_ibs_state) {\n\tcase HCI_IBS_RX_AWAKE:\n\t\t/* Update state */\n\t\tqca->rx_ibs_state = HCI_IBS_RX_ASLEEP;\n\t\t/* Vote off rx clock under workqueue */\n\t\tqueue_work(qca->workqueue, &qca->ws_rx_vote_off);\n\t\tbreak;\n\n\tcase HCI_IBS_RX_ASLEEP:\n\t\t/* Fall through */\n\n\tdefault:\n\t\t/* Any other state is illegal */\n\t\tBT_ERR(\"Received HCI_IBS_SLEEP_IND in rx state %d\",\n\t\t       qca->rx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n}\n\n/* Called upon wake-up-acknowledgement from the device\n */\nstatic void device_woke_up(struct hci_uart *hu)\n{\n\tunsigned long flags, idle_delay;\n\tstruct qca_data *qca = hu->priv;\n\tstruct sk_buff *skb = NULL;\n\n\tBT_DBG(\"hu %p woke up\", hu);\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\tqca->ibs_recv_wacks++;\n\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_AWAKE:\n\t\t/* Expect one if we send 2 WAKEs */\n\t\tBT_DBG(\"Received HCI_IBS_WAKE_ACK in tx state %d\",\n\t\t       qca->tx_ibs_state);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_WAKING:\n\t\t/* Send pending packets */\n\t\twhile ((skb = skb_dequeue(&qca->tx_wait_q)))\n\t\t\tskb_queue_tail(&qca->txq, skb);\n\n\t\t/* Switch timers and change state to HCI_IBS_TX_AWAKE */\n\t\tdel_timer(&qca->wake_retrans_timer);\n\t\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\n\t\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\n\t\tqca->tx_ibs_state = HCI_IBS_TX_AWAKE;\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\t\t/* Fall through */\n\n\tdefault:\n\t\tBT_ERR(\"Received HCI_IBS_WAKE_ACK in tx state %d\",\n\t\t       qca->tx_ibs_state);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\t/* Actually send the packets */\n\thci_uart_tx_wakeup(hu);\n}\n\n/* Enqueue frame for transmittion (padding, crc, etc) may be called from\n * two simultaneous tasklets.\n */\nstatic int qca_enqueue(struct hci_uart *hu, struct sk_buff *skb)\n{\n\tunsigned long flags = 0, idle_delay;\n\tstruct qca_data *qca = hu->priv;\n\n\tBT_DBG(\"hu %p qca enq skb %p tx_ibs_state %d\", hu, skb,\n\t       qca->tx_ibs_state);\n\n\t/* Prepend skb with frame type */\n\tmemcpy(skb_push(skb, 1), &hci_skb_pkt_type(skb), 1);\n\n\t/* Don't go to sleep in middle of patch download or\n\t * Out-Of-Band(GPIOs control) sleep is selected.\n\t */\n\tif (!test_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags)) {\n\t\tskb_queue_tail(&qca->txq, skb);\n\t\treturn 0;\n\t}\n\n\tspin_lock_irqsave(&qca->hci_ibs_lock, flags);\n\n\t/* Act according to current state */\n\tswitch (qca->tx_ibs_state) {\n\tcase HCI_IBS_TX_AWAKE:\n\t\tBT_DBG(\"Device awake, sending normally\");\n\t\tskb_queue_tail(&qca->txq, skb);\n\t\tidle_delay = msecs_to_jiffies(qca->tx_idle_delay);\n\t\tmod_timer(&qca->tx_idle_timer, jiffies + idle_delay);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_ASLEEP:\n\t\tBT_DBG(\"Device asleep, waking up and queueing packet\");\n\t\t/* Save packet for later */\n\t\tskb_queue_tail(&qca->tx_wait_q, skb);\n\n\t\tqca->tx_ibs_state = HCI_IBS_TX_WAKING;\n\t\t/* Schedule a work queue to wake up device */\n\t\tqueue_work(qca->workqueue, &qca->ws_awake_device);\n\t\tbreak;\n\n\tcase HCI_IBS_TX_WAKING:\n\t\tBT_DBG(\"Device waking up, queueing packet\");\n\t\t/* Transient state; just keep packet for later */\n\t\tskb_queue_tail(&qca->tx_wait_q, skb);\n\t\tbreak;\n\n\tdefault:\n\t\tBT_ERR(\"Illegal tx state: %d (losing packet)\",\n\t\t       qca->tx_ibs_state);\n\t\tkfree_skb(skb);\n\t\tbreak;\n\t}\n\n\tspin_unlock_irqrestore(&qca->hci_ibs_lock, flags);\n\n\treturn 0;\n}\n\nstatic int qca_ibs_sleep_ind(struct hci_dev *hdev, struct sk_buff *skb)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\n\tBT_DBG(\"hu %p recv hci ibs cmd 0x%x\", hu, HCI_IBS_SLEEP_IND);\n\n\tdevice_want_to_sleep(hu);\n\n\tkfree_skb(skb);\n\treturn 0;\n}\n\nstatic int qca_ibs_wake_ind(struct hci_dev *hdev, struct sk_buff *skb)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\n\tBT_DBG(\"hu %p recv hci ibs cmd 0x%x\", hu, HCI_IBS_WAKE_IND);\n\n\tdevice_want_to_wakeup(hu);\n\n\tkfree_skb(skb);\n\treturn 0;\n}\n\nstatic int qca_ibs_wake_ack(struct hci_dev *hdev, struct sk_buff *skb)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\n\tBT_DBG(\"hu %p recv hci ibs cmd 0x%x\", hu, HCI_IBS_WAKE_ACK);\n\n\tdevice_woke_up(hu);\n\n\tkfree_skb(skb);\n\treturn 0;\n}\n\n#define QCA_IBS_SLEEP_IND_EVENT \\\n\t.type = HCI_IBS_SLEEP_IND, \\\n\t.hlen = 0, \\\n\t.loff = 0, \\\n\t.lsize = 0, \\\n\t.maxlen = HCI_MAX_IBS_SIZE\n\n#define QCA_IBS_WAKE_IND_EVENT \\\n\t.type = HCI_IBS_WAKE_IND, \\\n\t.hlen = 0, \\\n\t.loff = 0, \\\n\t.lsize = 0, \\\n\t.maxlen = HCI_MAX_IBS_SIZE\n\n#define QCA_IBS_WAKE_ACK_EVENT \\\n\t.type = HCI_IBS_WAKE_ACK, \\\n\t.hlen = 0, \\\n\t.loff = 0, \\\n\t.lsize = 0, \\\n\t.maxlen = HCI_MAX_IBS_SIZE\n\nstatic const struct h4_recv_pkt qca_recv_pkts[] = {\n\t{ H4_RECV_ACL,             .recv = hci_recv_frame    },\n\t{ H4_RECV_SCO,             .recv = hci_recv_frame    },\n\t{ H4_RECV_EVENT,           .recv = hci_recv_frame    },\n\t{ QCA_IBS_WAKE_IND_EVENT,  .recv = qca_ibs_wake_ind  },\n\t{ QCA_IBS_WAKE_ACK_EVENT,  .recv = qca_ibs_wake_ack  },\n\t{ QCA_IBS_SLEEP_IND_EVENT, .recv = qca_ibs_sleep_ind },\n};\n\nstatic int qca_recv(struct hci_uart *hu, const void *data, int count)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\tif (!test_bit(HCI_UART_REGISTERED, &hu->flags))\n\t\treturn -EUNATCH;\n\n\tqca->rx_skb = h4_recv_buf(hu->hdev, qca->rx_skb, data, count,\n\t\t\t\t  qca_recv_pkts, ARRAY_SIZE(qca_recv_pkts));\n\tif (IS_ERR(qca->rx_skb)) {\n\t\tint err = PTR_ERR(qca->rx_skb);\n\t\tBT_ERR(\"%s: Frame reassembly failed (%d)\", hu->hdev->name, err);\n\t\tqca->rx_skb = NULL;\n\t\treturn err;\n\t}\n\n\treturn count;\n}\n\nstatic struct sk_buff *qca_dequeue(struct hci_uart *hu)\n{\n\tstruct qca_data *qca = hu->priv;\n\n\treturn skb_dequeue(&qca->txq);\n}\n\nstatic uint8_t qca_get_baudrate_value(int speed)\n{\n\tswitch (speed) {\n\tcase 9600:\n\t\treturn QCA_BAUDRATE_9600;\n\tcase 19200:\n\t\treturn QCA_BAUDRATE_19200;\n\tcase 38400:\n\t\treturn QCA_BAUDRATE_38400;\n\tcase 57600:\n\t\treturn QCA_BAUDRATE_57600;\n\tcase 115200:\n\t\treturn QCA_BAUDRATE_115200;\n\tcase 230400:\n\t\treturn QCA_BAUDRATE_230400;\n\tcase 460800:\n\t\treturn QCA_BAUDRATE_460800;\n\tcase 500000:\n\t\treturn QCA_BAUDRATE_500000;\n\tcase 921600:\n\t\treturn QCA_BAUDRATE_921600;\n\tcase 1000000:\n\t\treturn QCA_BAUDRATE_1000000;\n\tcase 2000000:\n\t\treturn QCA_BAUDRATE_2000000;\n\tcase 3000000:\n\t\treturn QCA_BAUDRATE_3000000;\n\tcase 3500000:\n\t\treturn QCA_BAUDRATE_3500000;\n\tdefault:\n\t\treturn QCA_BAUDRATE_115200;\n\t}\n}\n\nstatic int qca_set_baudrate(struct hci_dev *hdev, uint8_t baudrate)\n{\n\tstruct hci_uart *hu = hci_get_drvdata(hdev);\n\tstruct qca_data *qca = hu->priv;\n\tstruct sk_buff *skb;\n\tu8 cmd[] = { 0x01, 0x48, 0xFC, 0x01, 0x00 };\n\n\tif (baudrate > QCA_BAUDRATE_3000000)\n\t\treturn -EINVAL;\n\n\tcmd[4] = baudrate;\n\n\tskb = bt_skb_alloc(sizeof(cmd), GFP_ATOMIC);\n\tif (!skb) {\n\t\tBT_ERR(\"Failed to allocate memory for baudrate packet\");\n\t\treturn -ENOMEM;\n\t}\n\n\t/* Assign commands to change baudrate and packet type. */\n\tmemcpy(skb_put(skb, sizeof(cmd)), cmd, sizeof(cmd));\n\thci_skb_pkt_type(skb) = HCI_COMMAND_PKT;\n\n\tskb_queue_tail(&qca->txq, skb);\n\thci_uart_tx_wakeup(hu);\n\n\t/* wait 300ms to change new baudrate on controller side\n\t * controller will come back after they receive this HCI command\n\t * then host can communicate with new baudrate to controller\n\t */\n\tset_current_state(TASK_UNINTERRUPTIBLE);\n\tschedule_timeout(msecs_to_jiffies(BAUDRATE_SETTLE_TIMEOUT_MS));\n\tset_current_state(TASK_INTERRUPTIBLE);\n\n\treturn 0;\n}\n\nstatic int qca_setup(struct hci_uart *hu)\n{\n\tstruct hci_dev *hdev = hu->hdev;\n\tstruct qca_data *qca = hu->priv;\n\tunsigned int speed, qca_baudrate = QCA_BAUDRATE_115200;\n\tint ret;\n\n\tBT_INFO(\"%s: ROME setup\", hdev->name);\n\n\t/* Patch downloading has to be done without IBS mode */\n\tclear_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\n\n\t/* Setup initial baudrate */\n\tspeed = 0;\n\tif (hu->init_speed)\n\t\tspeed = hu->init_speed;\n\telse if (hu->proto->init_speed)\n\t\tspeed = hu->proto->init_speed;\n\n\tif (speed)\n\t\thci_uart_set_baudrate(hu, speed);\n\n\t/* Setup user speed if needed */\n\tspeed = 0;\n\tif (hu->oper_speed)\n\t\tspeed = hu->oper_speed;\n\telse if (hu->proto->oper_speed)\n\t\tspeed = hu->proto->oper_speed;\n\n\tif (speed) {\n\t\tqca_baudrate = qca_get_baudrate_value(speed);\n\n\t\tBT_INFO(\"%s: Set UART speed to %d\", hdev->name, speed);\n\t\tret = qca_set_baudrate(hdev, qca_baudrate);\n\t\tif (ret) {\n\t\t\tBT_ERR(\"%s: Failed to change the baud rate (%d)\",\n\t\t\t       hdev->name, ret);\n\t\t\treturn ret;\n\t\t}\n\t\thci_uart_set_baudrate(hu, speed);\n\t}\n\n\t/* Setup patch / NVM configurations */\n\tret = qca_uart_setup_rome(hdev, qca_baudrate);\n\tif (!ret) {\n\t\tset_bit(STATE_IN_BAND_SLEEP_ENABLED, &qca->flags);\n\t\tqca_debugfs_init(hdev);\n\t}\n\n\t/* Setup bdaddr */\n\thu->hdev->set_bdaddr = qca_set_bdaddr_rome;\n\n\treturn ret;\n}\n\nstatic struct hci_uart_proto qca_proto = {\n\t.id\t\t= HCI_UART_QCA,\n\t.name\t\t= \"QCA\",\n\t.manufacturer\t= 29,\n\t.init_speed\t= 115200,\n\t.oper_speed\t= 3000000,\n\t.open\t\t= qca_open,\n\t.close\t\t= qca_close,\n\t.flush\t\t= qca_flush,\n\t.setup\t\t= qca_setup,\n\t.recv\t\t= qca_recv,\n\t.enqueue\t= qca_enqueue,\n\t.dequeue\t= qca_dequeue,\n};\n\nint __init qca_init(void)\n{\n\treturn hci_uart_register_proto(&qca_proto);\n}\n\nint __exit qca_deinit(void)\n{\n\treturn hci_uart_unregister_proto(&qca_proto);\n}\n`\n\n\n// WEBPACK FOOTER //\n// ./src/FakeCode.js","/**\n * Jscii - Image to ASCII converter\n * http://enotionz.github.com/jscii/\n * Author: Dominick Pham (@enotionz | http://dph.am)\n */\n\n!function() {\n\n\tnavigator.getUserMedia = navigator.getUserMedia ||\n\t\tnavigator.webkitGetUserMedia ||\n\t\tnavigator.mozGetUserMedia ||\n\t\tnavigator.msGetUserMedia;\n\n\t/**\n\t * value to character mapping from dark to light\n\t * add more characters and they will be accounted for automatically\n\t * note: the extra &nbsp; is to account for the value range inclusive of 100%\n\t */\n\tvar chars = ['@','#','$','=','*','!',';',':','~','-',',','.','&nbsp;', '&nbsp;'];\n\t// invert colors\n\tchars = [\"&nbsp;\", \"&nbsp;\", \".\", \",\", \"-\", \"~\", \":\", \";\", \"!\", \"*\", \"=\", \"$\", \"#\", \"@\"];\n\tvar charLen = chars.length-1;\n\tfunction getChar(val) { return chars[parseInt(val*charLen, 10)]; }\n\n\t/**\n\t * log when getUserMedia or when video metadata loading fail\n\t */\n\tfunction logError(err) { if(console && console.log) console.log('Error!', err); return false; }\n\n\t/**\n\t * Options:\n\t * el        - DOM node (img or video)\n\t * container - if supplied, ascii string will automatically be set on container innerHTML during a render\n\t * fn        - function, callback to fire during a render with ascii string as arguments[0]\n\t * width     - hi-res images/videos must be resized down, specify width and jscii will figure out height\n\t * color     - enable color ascii (highly experimental)\n\t * interval  - integer - for videos only, this is the interval between each render\n\t * webrtc    - bool, default false, only applicable if 'el' is a video\n\t */\n\tfunction Jscii(params) {\n\t\tvar self = this;\n\n\t\tvar el = this.el = params.el;\n\t\tthis.container = params.container;\n\t\tthis.fn = typeof params.fn === 'function' ? params.fn : null;\n\t\tthis.width = typeof params.width === 'number' ? params.width : 150;\n\t\tthis.color = !!params.color;\n\n\t\tthis.canvas = document.createElement('canvas');\n\t\tthis.ctx = this.canvas.getContext('2d');\n\t\tvar nodeName = el.nodeName;\n\t\tif(nodeName === 'IMG') {\n\t\t\tself.render();\n\t\t\tel.addEventListener('load', function(){ self.render(); });\n\t\t} else if(nodeName === 'VIDEO') {\n\t\t\tthis.interval = typeof params.interval === 'number' ? params.interval : 15;\n\t\t\tthis.webrtc = !!params.webrtc;\n\n\t\t\tif(this.webrtc) {\n\t\t\t\tif(typeof navigator.getUserMedia !== 'function') {\n\t\t\t\t\treturn logError((el.innerHTML = 'Error: browser does not support WebRTC'));\n\t\t\t\t}\n\t\t\t\tnavigator.getUserMedia({video: true, audio: false}, function(localMediaStream){\n\t\t\t\t\tself.mediaStream = localMediaStream;\n\t\t\t\t\tel.src = (window.URL || window.webkitURL).createObjectURL(localMediaStream);\n\t\t\t\t}, logError);\n\t\t\t}\n\t\t\tel.addEventListener('loadeddata', function() { self.play(); });\n\t\t}\n\t}\n\n\t/**\n\t * start rendering, for video type only\n\t */\n\tJscii.prototype.play = function() {\n\t\tvar self = this;\n\t\tself.pause().videoTimer = setInterval(function() {\n\t\t\tif(self.mediaStream || !self.webrtc) self.render();\n\t\t}, self.interval);\n\t\treturn self;\n\t};\n\n\t/**\n\t * pause rendering, for video type only\n\t */\n\tJscii.prototype.pause = function() {\n\t\tif(this.videoTimer) clearInterval(this.videoTimer);\n\t\treturn this;\n\t};\n\n\t/**\n\t * getter/setter for output dimension\n\t */\n\tJscii.prototype.dimension = function(width, height) {\n\t\tif(typeof width === 'number' && typeof height === 'number') {\n\t\t\tthis._scaledWidth = this.canvas.width = width;\n\t\t\tthis._scaledHeight = this.canvas.height = height;\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn { width: this._scaledWidth, height: this._scaledHeight };\n\t\t}\n\t};\n\n\t/**\n\t * gets context image data, perform ascii conversion, append string to container\n\t */\n\tJscii.prototype.render = function() {\n\t\tvar el = this.el, nodeName = el.nodeName, ratio;\n\t\tvar dim = this.dimension(), width, height;\n\t\tif(!dim.width || !dim.height) {\n\t\t\tratio = nodeName === 'IMG' ? el.height/el.width : el.videoHeight/el.videoWidth;\n\t\t\tthis.dimension(this.width, parseInt(this.width*ratio, 10));\n\t\t\tdim = this.dimension();\n\t\t}\n\t\twidth = dim.width;\n\t\theight = dim.height;\n\n\t\t// might take a few cycles before we\n\t\tif(!width || !height) return;\n\n\t\tthis.ctx.drawImage(this.el, 0, 0, width, height);\n\t\tthis.imageData = this.ctx.getImageData(0, 0, width, height).data;\n\t\tvar asciiStr = this.getAsciiString();\n\t\tif(this.container) this.container.innerHTML = asciiStr;\n\t\tif(this.fn) this.fn(asciiStr);\n\t};\n\n\t/**\n\t * given a picture/frame's pixel data and a defined width and height\n\t * return the ASCII string representing the image\n\t */\n\tJscii.prototype.getAsciiString = function() {\n\t\tvar dim = this.dimension(), width = dim.width, height = dim.height;\n\t\tvar len = width*height, d = this.imageData, str = '';\n\n\t\t// helper function to retrieve rgb value from pixel data\n\t\tvar getRGB = function(i) { return [d[i=i*4], d[i+1], d[i+2]]; };\n\n\t\tfor(var i=0; i<len; i++) {\n\t\t\tif(i%width === 0) str += '\\n';\n\t\t\tvar rgb = getRGB(i);\n\t\t\tvar val = Math.max(rgb[0], rgb[1], rgb[2])/255;\n\t\t\tif(this.color) str += '<font style=\"color: rgb('+rgb.join(',')+')\">'+getChar(val)+'</font>';\n\t\t\telse str += getChar(val);\n\t\t}\n\t\treturn str;\n\t};\n\n\twindow.Jscii = Jscii;\n\n}();\n\n\n// WEBPACK FOOTER //\n// ./src/Jscii.js","module.exports = __webpack_public_path__ + \"static/img/amy.a7fc195.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/amy.png\n// module id = 70\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/charna.aeb5628.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/charna.png\n// module id = 71\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/del.92abdc1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/del.png\n// module id = 72\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/ian.638d02f.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/ian.png\n// module id = 73\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/keith.6b63371.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/keith.png\n// module id = 74\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/tj.3bd54f1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/tj.png\n// module id = 75\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/img/viola.8d75b50.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/viola.png\n// module id = 76\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-1799c926!vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./App.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-1799c926!vue-loader/lib/selector?type=template&index=0!./App.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 77\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-c73afbb0&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./AsciiImage.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./AsciiImage.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-c73afbb0!vue-loader/lib/selector?type=template&index=0!./AsciiImage.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-c73afbb0\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AsciiImage.vue\n// module id = 78\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-1a08c484&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./BootAnimation.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./BootAnimation.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-1a08c484!vue-loader/lib/selector?type=template&index=0!./BootAnimation.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-1a08c484\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/BootAnimation.vue\n// module id = 79\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-b0f73184&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./Intro.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Intro.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-b0f73184!vue-loader/lib/selector?type=template&index=0!./Intro.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-b0f73184\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Intro.vue\n// module id = 80\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-1027e76e&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./Rules.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Rules.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-1027e76e!vue-loader/lib/selector?type=template&index=0!./Rules.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-1027e76e\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Rules.vue\n// module id = 81\n// module chunks = 2","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!vue-loader/lib/style-rewriter?id=data-v-7768a5b6&scoped=true!sass-loader?sourceMap!vue-loader/lib/selector?type=styles&index=0!./Simulation.vue\")\n\n/* script */\n__vue_exports__ = require(\"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./Simulation.vue\")\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-7768a5b6!vue-loader/lib/selector?type=template&index=0!./Simulation.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n__vue_options__._scopeId = \"data-v-7768a5b6\"\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Simulation.vue\n// module id = 82\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"rules\"\n    }\n  }, [(_vm.step == 'board') ? _c('div', [_c('div', {\n    attrs: {\n      \"id\": \"board-title\"\n    }\n  }, [_vm._v(\"\\n      Active Rules\\n    \")]), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"board\"\n    }\n  }, _vm._l((_vm.rules), function(rule) {\n    return _c('div', [_c('div', {\n      staticClass: \"rule\",\n      class: {\n        removing: rule.removing\n      }\n    }, [_vm._v(\"\\n          \" + _vm._s(rule.text) + \"\\n        \")])])\n  }))]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'new rule') ? _c('div', [_c('div', {\n    class: {\n      'flash-text': _vm.newRuleStep == 'new rule'\n    },\n    attrs: {\n      \"id\": \"new-rule\"\n    }\n  }, [(_vm.newRuleStep == 'new rule') ? _c('div', [_c('div', {\n    staticClass: \"flash-text\"\n  }, [_vm._v(\"\\n          NEW RULE\\n        \")])]) : _vm._e(), _vm._v(\" \"), (_vm.newRuleStep == 'read rule') ? _c('div', [_c('TypeAndSay', {\n    attrs: {\n      \"timeout\": 40,\n      \"doneReading\": _vm.doneReading\n    }\n  }, [_vm._v(\"\\n          \" + _vm._s(_vm.newRuleText) + \"\\n        \")])], 1) : _vm._e()])]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'closer') ? _c('div', [_c('div', {\n    class: {\n      'flash-text': _vm.closerStep == 'closer title'\n    },\n    attrs: {\n      \"id\": \"closer\"\n    }\n  }, [(_vm.closerStep == 'closer title') ? _c('div', [_c('div', {\n    staticClass: \"flash-text\"\n  }, [_vm._v(\"\\n          CLOSER\\n        \")])]) : _vm._e(), _vm._v(\" \"), (_vm.closerStep == 'read closer') ? _c('div', [_c('TypeAndSay', {\n    attrs: {\n      \"timeout\": 40,\n      \"doneReading\": _vm.closerFunc\n    }\n  }, [_vm._v(\"\\n          \" + _vm._s(_vm.closerText) + \"\\n        \")])], 1) : _vm._e()])]) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1027e76e!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Rules.vue\n// module id = 83\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [(_vm.step.current == 'boot') ? _c('div', [_c('BootAnimation', {\n    attrs: {\n      \"showStep\": _vm.step\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'intro') ? _c('div', [_c('Intro', {\n    attrs: {\n      \"names\": _vm.names,\n      \"step\": _vm.step\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'rules') ? _c('div', [_c('Rules', {\n    attrs: {\n      \"ruleGens\": _vm.rules,\n      \"names\": _vm.names\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step.current == 'simulate') ? _c('div', [_c('Simulation', {\n    attrs: {\n      \"ruleGens\": _vm.rules,\n      \"names\": _vm.names\n    }\n  })], 1) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1799c926!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 84\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"boot-animation\"\n    }\n  }, [(_vm.step == 'fakeCode') ? _c('div', {\n    attrs: {\n      \"id\": \"fakecode\"\n    }\n  }, [_c('pre', [_vm._v(\"\\n        \"), _c('TypeWriter', {\n    attrs: {\n      \"timeout\": 40,\n      \"spliton\": '\\n'\n    }\n  }, [_vm._v(_vm._s(_vm.fakeCode))]), _vm._v(\"\\n      \")], 1)]) : _vm._e(), _vm._v(\" \"), (_vm.step == 'greenFlash') ? _c('div', {\n    staticClass: \"glitch\",\n    attrs: {\n      \"id\": \"green-flash\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.step == 'ascii') ? _c('div', {\n    attrs: {\n      \"id\": \"ascii\"\n    }\n  }, [_c('pre', {\n    attrs: {\n      \"id\": \"loading\"\n    }\n  }, [_vm._v(\"\\n        \"), _c('TypeWriter', {\n    attrs: {\n      \"timeout\": 60\n    }\n  }, [_vm._v(\"\\n\\nCalibrating comedic timing...\\nNullifying transactions...\\nFinding light...\\nSimulating montage...\\n\\n        \")]), _vm._v(\"        \\n      \")], 1), _vm._v(\" \"), _c('AsciiImage', {\n    attrs: {\n      \"imagename\": _vm.asciiName\n    }\n  })], 1) : _vm._e(), _vm._v(\" \"), (_vm.step == 'title') ? _c('div', {\n    class: {\n      inverted: _vm.titleInverted\n    },\n    attrs: {\n      \"id\": \"title\"\n    }\n  }, [_c('div', [_vm._v(\"IMPROV\")]), _vm._v(\" \"), _c('div', [_vm._v(\"GOD\")])]) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-1a08c484!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/BootAnimation.vue\n// module id = 85\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"typewriter\"\n  }, [_vm._v(\"\\n  \" + _vm._s(_vm.text) + \"\\n\")])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-37ef7f2a!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TypeWriter.vue\n// module id = 86\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"simulation\"\n    },\n    on: {\n      \"click\": _vm.simulateShow\n    }\n  }, [_c('h1', [_vm._v(\"Click me to simulate a show\")]), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"timeline\"\n    }\n  }, _vm._l((_vm.actions), function(action, i) {\n    return _c('div', {\n      staticClass: \"action\",\n      style: ({\n        left: _vm.getActionPos(action, _vm.actions)\n      })\n    }, [_c('div', {\n      staticClass: \"rules\",\n      style: ({\n        height: action.rules * 8 + 18 + 'px',\n        top: -action.rules * 8 - 18 + 'px'\n      })\n    }, [_c('span', {\n      staticClass: \"text\"\n    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.rules) + \"\\n\\t\\t\\t\\t\")])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"message\",\n      style: ({\n        height: i % 5 * 28 + 20 + 'px'\n      })\n    }, [_c('span', {\n      staticClass: \"text\"\n    }, [_vm._v(\"\\n\\t\\t\\t\\t\\t\" + _vm._s(action.message) + \" \" + _vm._s(_vm.formatTime(action.time)) + \"\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\")])])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-7768a5b6!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Simulation.vue\n// module id = 87\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"type-and-say\"\n    }\n  }, [_c('TypeWriter', {\n    attrs: {\n      \"volume\": _vm.typingVolume,\n      \"timeout\": _vm.timeout\n    }\n  }, [_vm._t(\"default\")], 2)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-95baebe8!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TypeAndSay.vue\n// module id = 88\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"intro\"\n    }\n  }, [_c('TypeAndSay', [_vm._v(_vm._s(_vm.message))])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-b0f73184!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Intro.vue\n// module id = 89\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"ascii-image\",\n    class: {\n      loaded: _vm.asciiLoaded\n    }\n  }, [_c('img', {\n    attrs: {\n      \"id\": \"image-del\",\n      \"src\": require(\"../assets/del.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-amy\",\n      \"src\": require(\"../assets/amy.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-charna\",\n      \"src\": require(\"../assets/charna.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-keith\",\n      \"src\": require(\"../assets/keith.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-tj\",\n      \"src\": require(\"../assets/tj.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-ian\",\n      \"src\": require(\"../assets/ian.png\")\n    }\n  }), _vm._v(\" \"), _c('img', {\n    attrs: {\n      \"id\": \"image-viola\",\n      \"src\": require(\"../assets/viola.png\")\n    }\n  }), _vm._v(\" \"), _c('pre', {\n    staticClass: \"ascii-text\"\n  }, [_vm._v(\"\\n    \" + _vm._s(_vm.text) + \"\\n  \")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loading-cover\"\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-c73afbb0!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/AsciiImage.vue\n// module id = 90\n// module chunks = 2"],"sourceRoot":""}